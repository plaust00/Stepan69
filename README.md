Stepan69
========

#include &lt;a_samp> #include &lt;a_mysql> #include &lt;mxINI> #include &lt;crashdetect> #include &lt;utils> //#include &lt;streamer> #pragma tabsize 0 //============================[Information]===================================// #define VersionMode "v4.7"                                                    // Âåðñèÿ ìîäà #define Server_Name "Revoluton RP"                                            // Íàçâàíèå Ñåðâåðà #define SITE_HTTP   "vk.com/new_Revoluton_game"                               // Íàçâàíèÿ ãðóïïû #define By          "Stepan_Efimov &amp; Semyon Bondarev"                         // Ðàçðàáîò÷èêè //===============================[MySQL äàííûå]===============================// #define SQL_HOST    "mc3.baims.ru" #define SQL_USER    "gta_4373" #define SQL_DB      "gta_4373" #define SQL_PASS    "4G2u83uYtq" //=============================[Öâåòà â ñòèëå Delphi]=========================// #define clWhite		0xFEFEFEFF                                                // Áåëûé #define clGrad      0xB4B5B7FF                                                // Ñåðûé #define clBlue		0x3399FF                                                  // Ñèíèé #define clLightBlue	0x8888FFFF                                                // Ñâåòëî-ñèíèé #define clDarkRed	0xDD4400FF                                                // Òåìíî-êðàñíûé #define clLightRed	0xFF8800FF                                                // Ñâåòëî-êðàñíûé #define clRed	    0xFF0000AA                                                // Êðàñíûé #define clYellow	0xFFFF00FF                                                // Æåëòûé #define clOrange	0xFFA500FF                                                // Îðàíæåâûé #define clGrey		0xCFCFCFFF                                                // Ñåðûé #define clGreen		0x22AA44FF                                                // Çåëåíûé #define clLime		0x88DD00FF                                                // Ëàéìîâûé #define clBlack		0x000000FF                                                // ×åðíûé #define clPurple	0xC2A2DAAA                                                // Ïóðïóðíûé //==============================[Íàñòðîéêè]===================================// #define long_line	           500                                            // Ìàêñèìàëüíàÿ äëèíà ñòðîêîâîé êîíñòàíòû #define short_line             60                                             // Ìàêñèìàëüíàÿ äëèíà ñòðîêîâîé êîíñòàíòû #define	small_line	           25                                             // Ìàêñèìàëüíàÿ äëèíà ñòðîêîâîé êîíñòàíòû #define dialog_line	           2000                                           // Ìàêñèìàëüíàÿ äëèíà ñòðîêîâîé êîíñòàíòû(Äèàëîãè) #define max_tps                100                                            // Ìàêñèìàëüíîå êîëè÷åñòâî òåëåïîðòîâ #define max_name               24                                             // Ìàêñèìàëüíàÿ äëèíà èìåíè #define max_line               200                                            // Ìàêñèìàëüíàÿ äëèíà ñòðîêîâîé êîíñòàíòû #define max_houses		       300                                            // Ìàêñèìàëüíîå êîëè÷åñòâî äîìîâ #define max_biznes		       300                                            // Ìàêñèìàëüíîå êîëè÷åñòâî áèçíåñîâ #define max_factions           13                                             // Ìàêñèìàëüíàÿ êîëè÷åñòâî ôðàêöèé #define distance_close         2.0 #define distance_normal	       20.0                                           // Ëîêàëüíûé ÷àò. #define invnumbers             11                                             // Èíâåíòàðü, äåôàéí äëÿ ìàññèâîâ ñ íàçâàíèÿìè è îáúåêòàìè #define max_obj                10000                                          // Ìàêñèìàëüíî êîëâî îáúåêòîâ ëóòà //==============================[Ðåãèñòðàöèÿ]=================================// #define dialog_loot            0 #define dialog_login           1 #define dialog_register        2 #define dialog_alogin          3 #define dialog_aregister       4 #define dialog_invite          5 //==============================[Êàòåãîðèè ÒÑ]================================// #define Cat0	               0	                                          // Âåëîñèïåäû #define CatA	               1                                              // Ìîòîöèêëû, êâàäðîöèêë #define CatB	               2                                              // Ëåãêîâûå, äæèïû, ìèêðîàâòîáóñû #define CatC	               3                                              // Ãðóçîâèêè, àâòîáóñû #define CatD	               4                                              // Âåñü âîäíûé òðàíñïîðò #define CatE	               5                                              // Âåðòîëåòû #define CatF	               6                                              // Ñàìîëåòû #define CatG	               7                                              // Ïîåçäà //==============================[main]========================================// main(){ print("--------------------------------"); print(" by:      "By"                  "); print(" Version: "VersionMode"         "); print(" Name:    "Server_Name"         "); print(" HTTP:    "SITE_HTTP"           "); print("--------------------------------");} //============================[Óïðàù¸ííûé âèä]================================// #define restricted(%1); \ if(AdminInfo[playerid][aAdmin]&lt;%1){ \ Message(playerid,"Ó âàñ íåòó ïðàâ äëÿ èñïîëüçîâàíèÿ ýòîé êîìàíäû!",clLightRed); \ return 1;} //-- GetInt #define getInt(%2); \ tmp = strtok(cmdtext,idx); \ if(!strlen(tmp)) { \ Message(playerid,%2,clWhite); \ return 1;} \ pint = strval(tmp); //-- GetStr #define getStr(%2); \ tmp = strtok(cmdtext,idx); \ if(!strlen(tmp)){ \ Message(playerid,%2,clWhite); \ return 1;} //-- GetTgt #define getTgt(%2); \ tmp = strtok(cmdtext,idx); \ if(!strlen(tmp)){ \ Message(playerid,%2,clWhite); \ return 1;} \ tgt = ReturnUser(tmp);\ checkplayer(tgt); //-- ÑheckPlayer #define checkplayer(%1); \ if(!IsPlayerConnected(%1)){\ Message(playerid,"Íåò òàêîãî èãðîêà.",clDarkRed);\ return 1;} //-- CheckDistance #define checkdistance(%1,%2,%3); \ if(GetDistancePP(%1,%2)>%3){ \ format(msg,max_line,"%s ñëèøêîì äàëåêî îò âàñ",GetName(%2));\ Message(%1,msg,clDarkRed);\ return 1;} //==============================forward=======================================// forward GivePlayerCash(playerid,amount); forward UnGivePlayerCash(playerid,cash); forward HideCash(); forward PlayerToPoint(Float:radi, playerid, Float:x, Float:y, Float:z); forward Unfreze(playerid); forward OnPlayerDataLoaded(playerid, race_check); forward OnPlayerRegister(playerid); forward OnAdminRegister(playerid); forward OnAdminDataLoaded(playerid); forward HUDTimerUpdate(playerid); forward SaveAccount(playerid); forward KickPlayer(playerid); forward BanPlayer(playerid); forward tpLoad(); forward OnTeleportCreate(f); forward OnHouseCreate(f); forward OnBiznesCreate(f); forward OnVehicleCreate(f); forward LoadProp(); forward LoadBiz(); forward LoadVehicles(); forward LoadObjects(); forward gClose(id); //==============================pInfo=========================================// enum pInfo { pID, pPassword[129], pKills, pDeaths, pMoney, pBank, pFaction, pRank, pSkin, Float:pPosX, Float:pPosY, Float:pPosZ, Float:pPosA, Float:pHealth, pBanned, }; //==============================hInfo=========================================// enum hInfo{ hPickupID,// Íå ñîõðàíÿåòñÿ hID, hPrice, hIcon, hIntr, hOpen, Float: hPosX, Float: hPosY, Float: hPosZ, Float: hPosR, Float: hEPosX, Float: hEPosY, Float: hEPosZ, Float: hEPosR, }; //==============================aAdmin========================================// enum aInfo{ aID, aPassword[129], aAdmin, aBans, aKicks, }; //==============================tInfo=========================================// enum tInfo{ tpPickupid,// Íå ñîõðàíÿåòñÿ tpID, tpIntr, tpFaction, Float: tpSPos[3], Float: tpDPos[4], }; //=============================bInfo==========================================// enum bInfo{ bPickupID,// Íå ñîõðàíÿåòñÿ bID, bOpen, bIntr, bPrice, Float:bSPos[4], Float:bDPos[4], } //============================vInfo===========================================// enum vInfo{ vPickupID,// Íå ñîõðàíÿåòñÿ vID, vModel, vColor1, vColor2, Float:vHealth, Float:vPos[4], } //==============================Äàííûå ïðåäìåòîâ ëóòà=========================// enum dInvEnum{ Float:ItemPos[3], ItemObjID, ItemID}; //==============================Ïåðåìåííûå====================================// new PlayerInv[max_players][invnumbers];                                       // Òóò Õðàíèì èäû ïðåäìåòîâ èíâåíòàðÿ new dInvData[max_obj][dInvEnum];                                              // Ïåðåìåííàÿ îïðåäåëÿþùàÿ èä ëóòà è åãî ïîçèöèþ new AdminInfo[max_players][aInfo];                                            // Ìàññèâ Àäìèíèñòðàòîðà new PlayerInfo[max_players][pInfo];                                           // Ìàññèâ Èãðîêà new LicenseInfo[max_players][8];                                              // Ëèöåíçèè new HouseInfo[max_houses][hInfo];                                             // Ìàññèâ äîìà new BiznesInfo[max_biznes][bInfo];                                            // Ìàññèâ áèçíåñà new TeleportInfo[max_tps][tInfo];                                             // Ìàññèâ òåëåïîðòîâ new VehicleInfo[max_vehicles][vInfo];                                         // Ìàññèâ ìàøèí new ReportDelay[max_players];                                                 // Ñåêóíäû äî íîâîãî ðåïîðòà new LastSecond[max_players]; new Perevod[max_players]; new MysqlRaceCheck[max_players]; new LoginAttempts[max_players]; new TimerHideCash[max_players];                                               // Òàéìåð äî ñêðûòèÿ - äåíåã new hOwner[max_houses][max_name]; new PropIcon[max_houses][max_players]; new Flasher[max_players];                                                     // Ìèãàëêà new FlasherObj[max_vehicles];                                                 // Ìèãàëêà (îáúåêò) new GivePlayerAdmin[max_players] = 0; new bOwner[max_biznes][max_name]; new SpectateType[max_players]; new AdminSpecID[max_players]; new bool:Logged[max_players]; //-- Texts new Text: TextDrawCash[max_players]; //-- new SQL = -1; new Report = 1; new Kazna = 0; //----------------------------------------------------------------------------// new CatName[][] = {"0","A","B","C","D","E","F","G"}; // --------------Èíâåíòàðü----------------------------------------------------// new InvNames[invnumbers][]={ "Íè÷åãî", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà", "Ìèãàëêà"}; // ---------------------------------------------------------------------------// new InvObjects[invnumbers] = { 0,18646,18646,18646,18646,18646,18646,18646,18646,18646,18646}; //----------------------------------------------------------------------------// new CarName[][] ={ "Landstalker", "Bravura", "Buffalo", "Linerunner", "Perrenial", "Sentinel", "Dumper", "Firetruck", "Trashmaster", "Stretch", "Manana", "Infernus", "Voodoo", "Pony", "Mule", "Cheetah", "Ambulance", "Leviathan", "Moonbeam", "Esperanto", "Taxi", "Washington", "Bobcat", "Whoopee", "BF Injection", "Hunter", "Premier", "Enforcer", "Securicar", "Banshee", "Predator", "Bus", "Rhino", "Barracks", "Hotknife", "Trailer", "Previon", "Coach", "Cabbie", "Stallion", "Rumpo", "RC Bandit", "Romero", "Packer", "Monster", "Admiral", "Squalo", "Seasparrow", "Pizzaboy", "Tram", "Trailer", "Turismo", "Speeder", "Reefer", "Tropic", "Flatbed", "Yankee", "Caddy", "Solair", "Berkley's RC Van", "Skimmer", "PCJ-600", "Faggio", "Freeway", "RC Baron", "RC Raider", "Glendale", "Oceanic","Sanchez", "Sparrow", "Patriot", "Quad", "Coastguard", "Dinghy", "Hermes", "Sabre", "Rustler", "ZR-350", "Walton", "Regina", "Comet", "BMX", "Burrito", "Camper", "Marquis", "Baggage", "Dozer", "Maverick", "News Chopper", "Rancher", "FBI Rancher", "Virgo", "Greenwood", "Jetmax", "Hotring", "Sandking", "Blista Compact", "Police Maverick", "Boxvillde", "Benson", "Mesa", "RC Goblin", "Hotring Racer A", "Hotring Racer B", "Bloodring Banger", "Rancher", "Super GT", "Elegant", "Journey", "Bike", "Mountain Bike", "Beagle", "Cropduster", "Stunt", "Tanker", "Roadtrain", "Nebula", "Majestic", "Buccaneer", "Shamal", "Hydra", "FCR-900", "NRG-500", "HPV1000", "Cement Truck", "Tow Truck", "Fortune", "Cadrona", "FBI Truck", "Willard", "Forklift", "Tractor", "Combine", "Feltzer", "Remington", "Slamvan", "Blade", "Freight", "Streak", "Vortex", "Vincent", "Bullet", "Clover", "Sadler", "Firetruck", "Hustler", "Intruder", "Primo", "Cargobob", "Tampa", "Sunrise", "Merit", "Utility", "Nevada", "Yosemite", "Windsor", "Monster", "Monster", "Uranus", "Jester", "Sultan", "Stratium", "Elegy", "Raindance", "RC Tiger", "Flash", "Tahoma", "Savanna", "Bandito", "Freight Flat", "Streak Carriage", "Kart", "Mower", "Dune", "Sweeper", "Broadway", "Tornado", "AT-400", "DFT-30", "Huntley", "Stafford", "BF-400", "News Van", "Tug", "Trailer", "Emperor", "Wayfarer", "Euros", "Hotdog", "Club", "Freight Box", "Trailer", "Andromada", "Dodo", "RC Cam", "Launch", "Police Car", "Police Car", "Police Car", "Police Ranger", "Picador", "S.W.A.T", "Alpha", "Phoenix", "Glendale", "Sadler", "Luggage", "Luggage", "Stairs", "Boxville", "Tiller", "Utility Trailer", "foot"}; // ---------------------------------------------------------------------------// new Text:TextDrawInvFon; new Text:TextDrawInvMenu; new Text:TextDrawInvPocket; new Text:TextDrawInvPack; new Text:TextDrawInvCar; new Text:TextDrawInvShop; new PlayerText:Graphinv9[max_players][12]; new PlayerText:TextDrawInvSkin[max_players]; new PlayerText:TextDrawInvItems[max_players]; new PlayerText:TextDrawInvItems2[max_players]; new PlayerText:TextDrawInvItems3[max_players]; new PlayerText:TextDrawInvItems4[max_players]; new PlayerText:TextDrawInvItems5[max_players]; new PlayerText:TextDrawInvItems6[max_players]; new PlayerText:TextDrawInvItems7[max_players]; new PlayerText:TextDrawInvItems8[max_players];  new PlayerText:Graphinv[max_players]; new PlayerText:TextDrawInvLicenses[max_players]; new PlayerText:TextDrawInvFraction[max_players]; // ---------------------------------------------------------------------------// new GraphItemList[11][max_players];//Ïåðåìåííàÿ äëÿ õðàíåíèÿ èäîâ èíâåíòàðÿ â ÿ÷åéêå òåêñòäðàâà new SelectItem[max_players];//Ïåðåìåííàÿ äëÿ õðàíåíèÿ èäîâ èíâåíòàðÿ ïðè êëèêå // ---------------------------------------------------------------------------// new FactionNames[max_factions][]={ "Ãðàæäàíñêèé",         // 0 "Ïîëèöèÿ Los Santos",  // 1 "Ïîëèöèÿ San Fiero",   // 2 "Ïîëèöèÿ Las Venturas",// 3 "FBI",                 // 4 "Ïðàâèòåëüñòâî",       // 5 "Ïîëèöåéñêàÿ àêàäåìèÿ",// 6 "Àðìèÿ SF",            // 7 "Àðìèÿ LV",            // 8 "Ëèöåíçåðû",           // 9 "Ìåäèêè LS",           // 10 "Ìåäèêè LV",           // 11 "Ìåäèêè SF"            // 12 }; // ---------------------------------------------------------------------------// new MaxFactionRank[max_factions]={ 0,  // Ãðàæäàíñêèå          [0] 9,  // Ïîëèöèÿ LS           [1] 9,  // Ïîëèöèÿ SF           [2] 9,  // Ïîëèöèÿ LV           [3] 7,  // ÔÁÐ                  [4] 4,  // Ïðàâèòåëüñòâî        [5] 2,  // Ïîëèöåéñêàÿ àêàäåìèÿ [6] 13, // Àðìèÿ ÑÔ             [7] 13, // Àðìèÿ ËÂ             [8] 5,  // Ìåäèêè LS            [9] 5,  // Ìåäèêè LV            [10] 5,  // Ìåäèêè SF            [11] }; // ---------------------------------------------------------------------------// new FactionRangNames[max_factions][15][128]={ {"Íåò","","","","","","","","","","","","","",""},// Ãðàæäàíñêèå {"Íåò","Îôèöåð","Äåòåêòèâ","Ñåðæàíò","Ëåéòåíàíò","Êàïèòàí","Èíñïåêòîð","Øåô ïîëèöèè","Ïîìîøíèê êîìèññàðà","Êîìèññàð","","","","",""},// Ïîëèöèÿ LS {"Íåò","Îôèöåð","Äåòåêòèâ","Ñåðæàíò","Ëåéòåíàíò","Êàïèòàí","Èíñïåêòîð","Øåô ïîëèöèè","Ïîìîøíèê êîìèññàðà","Êîìèññàð","","","","",""},// Ïîëèöèÿ SF {"Íåò","Îôèöåð","Äåòåêòèâ","Ñåðæàíò","Ëåéòåíàíò","Êàïèòàí","Èíñïåêòîð","Øåô ïîëèöèè","Ïîìîøíèê êîìèññàðà","Êîìèññàð","","","","",""},// Ïîëèöèÿ LV {"Íåò","Ñòàæåð","Àãåíò","Ñòàðøèé àãåíò","Ñïåöèàëüíûé àãåíò","Èíñïåêòîð","Çàì. Äèðåêòîðà","Äèðåêòîð FBI","","","","","","",""},// FBI {"Íåò","Ìýð ËÑ","Ìýð ËÂ","Ìýð ÑÔ","Ãóáåðíàòîð","","","","","","","","","",""},                                                                                              // Ïðàâèòåëüñòâî {"Íåò","Îôèöåð","Çàì. ÊÊ","","","","","","","","","","","",""}, // Ïîëèöåéñêàÿ àêàäåìèÿ {"Íåò","Ðÿäîâîé","Êàïðàë","Ñåðæàíò","Øòàï-ñåðæàíò","Ìàñòåð ñåðæàíò","Ñåðæàíò ìàéîð","Ëåéòåíàíò","Êàïèòàí","Ìàéîð","Ïîäïîëêîâíèê","Ïîëêîâíèê","Ãåíåðàë","Ãåíåðàë àðìèè",""}, // Àðìèÿ ÑÔ {"Íåò","Ðÿäîâîé","Êàïðàë","Ñåðæàíò","Øòàï-ñåðæàíò","Ìàñòåð ñåðæàíò","Ñåðæàíò ìàéîð","Ëåéòåíàíò","Êàïèòàí","Ìàéîð","Ïîäïîëêîâíèê","Ïîëêîâíèê","Ãåíåðàë","Ãåíåðàë àðìèè",""}, // Àðìèÿ ËÂ {"Íåò","Ñàíèòàð","","","","","","","","","","","","",""}, // Ìåäèêè LS {"Íåò","Ñàíèòàð","","","","","","","","","","","","",""}, // Ìåäèêè LV {"Íåò","Ñàíèòàð","","","","","","","","","","","","",""}, // Ìåäèêè SF {"Íåò","","","","","","","","","","","","","",""}};               // íåòó //==============================OnGameModeInit================================// public OnGameModeInit(){ new query[128]; //-- Connect mysql --// mysql_log(LOG_ERROR | LOG_WARNING, LOG_TYPE_TEXT); SQL = mysql_connect(SQL_HOST, SQL_USER, SQL_DB, SQL_PASS); //-- mysql_format(SQL, query, sizeof(query), "SELECT * FROM `Teleports` WHERE `ID`"); mysql_tquery(SQL, query, "tpLoad","",""); //-- mysql_format(SQL, query, sizeof(query), "SELECT * FROM `Props` WHERE `ID`"); mysql_tquery(SQL, query, "LoadProp","",""); //-- mysql_format(SQL, query, sizeof(query), "SELECT * FROM `Biznes` WHERE `ID`"); mysql_tquery(SQL, query, "LoadBiz","",""); //-- mysql_format(SQL, query, sizeof(query), "SELECT * FROM `Vehicles` WHERE `ID`"); mysql_tquery(SQL, query, "LoadVehicles","",""); //-- Timers --// SetTimer("SaveAccount",50000,1); //-- Loading --//  //-- Íàñòðîéêè --// ShowNameTags(1); EnableStuntBonusForAll(0); DisableInteriorEnterExits(); SetNameTagDrawDistance(20.0); SetGameModeText("Revolution-Rp v3.0"); CreateInventoryTextDraw(); UsePlayerPedAnims(); AddPlayerClass(0,1958.33, 1343.12, 15.36, 269.15,0,0,0,0,0,0); //-- return 1;}// Êîíåö public OnGameModeInit //==============================OnGameModeExit================================// public OnGameModeExit(){ //==Inv TextDrawHideForAll(TextDrawInvFon); TextDrawDestroy(TextDrawInvFon); TextDrawHideForAll(TextDrawInvMenu); TextDrawDestroy(TextDrawInvMenu); TextDrawHideForAll(TextDrawInvPocket); TextDrawDestroy(TextDrawInvPocket); TextDrawHideForAll(TextDrawInvPack); TextDrawDestroy(TextDrawInvPack); TextDrawHideForAll(TextDrawInvCar); TextDrawDestroy(TextDrawInvCar); TextDrawHideForAll(TextDrawInvShop); TextDrawDestroy(TextDrawInvShop); mysql_close(); for(new i = 0; i &lt; max_players; i++){ if(SpectateType[i] != 0) SpectateType[i] = 0; } return 1;}// Êîíåö public OnGameModeExit //========================OnPlayerRequestClass================================// public OnPlayerRequestClass(playerid, classid){  return 1;} //=============================OnPlayerConnect================================// public OnPlayerConnect(playerid){ //-- mysql --// MysqlRaceCheck[playerid]++; for(new pInfo:e; e &lt; pInfo; ++e) PlayerInfo[playerid][e] = 0; new query[128]; mysql_format(SQL, query, sizeof(query), "SELECT * FROM `Users` WHERE `Name` = '%e' LIMIT 1", GetName(playerid)); mysql_tquery(SQL, query, "OnPlayerDataLoaded", "dd", playerid, MysqlRaceCheck[playerid]); //-- Íàñòðîéêè --// ShowPlayerTextDraw(playerid); //-- SetPlayerHealth(playerid, 100.0); CreateItemList(playerid); SetPlayerColor(playerid, clWhite); if(SpectateType[playerid] != 0) SpectateType[playerid] = 0; return 1;} //==========================OnPlayerDisconnect================================// public OnPlayerDisconnect(playerid, reason){ //-- Mysql --// MysqlRaceCheck[playerid]++; SaveAccount(playerid); //-- DestroyItemList(playerid); GivePlayerAdmin[playerid] = 0; LoginAttempts[playerid] = 0; if(SpectateType[playerid] != 0) SpectateType[playerid] = 0; //-- PlayerTextDrawHide(playerid,TextDrawInvFraction[playerid]); PlayerTextDrawDestroy(playerid,TextDrawInvFraction[playerid]); PlayerTextDrawHide(playerid,TextDrawInvLicenses[playerid]); PlayerTextDrawDestroy(playerid,TextDrawInvLicenses[playerid]); PlayerTextDrawHide(playerid, TextDrawInvSkin[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvSkin[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems2[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems2[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems3[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems3[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems4[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems4[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems5[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems5[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems6[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems6[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems7[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems7[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems8[playerid]); PlayerTextDrawDestroy(playerid, TextDrawInvItems8[playerid]); return 1;} //========================OnPlayerSpawn=======================================// public OnPlayerSpawn(playerid){ Logged[playerid] = true; SetIcons(playerid); if(SpectateType[playerid] != 0) SpectateStop(playerid); //-- Óñòàíîâêà ñêèíà  //-- if(PlayerInfo[playerid][pPosX] > 0.0 || PlayerInfo[playerid][pPosY] > 0.0){ SetPlayerPos(playerid, PlayerInfo[playerid][pPosX], PlayerInfo[playerid][pPosY], PlayerInfo[playerid][pPosZ] + 1); SetPlayerFacingAngle(playerid, PlayerInfo[playerid][pPosA]); SetCameraBehindPlayer(playerid); //-- Óñòàíîâêà ñêèíà if(PlayerInfo[playerid][pFaction] &lt; 0){ SetPlayerFactionColor(playerid,PlayerInfo[playerid][pFaction]); SetPlayerSkin(playerid, SetPlayerFaction(playerid,PlayerInfo[playerid][pFaction], PlayerInfo[playerid][pRank])); } else { SetPlayerSkin(playerid, PlayerInfo[playerid][pSkin]); SetPlayerFactionColor(playerid,0);} //-- } else { SetPlayerHealth(playerid, 100); LastSecond[playerid] = -1; SpawnPlayer(playerid); return 1;} //-- return 1;}// The End public OnPlayerSpawn //========================OnPlayerDeath=======================================// public OnPlayerDeath(playerid, killerid, reason){ PlayerInfo[playerid][pDeaths] += 1; PlayerInfo[killerid][pKills] += 1; return 1;}  public OnVehicleSpawn(vehicleid){  return 1;}  public OnVehicleDeath(vehicleid, killerid) { 	return 1; }  public OnPlayerText(playerid, text[]) { 	return 1; } //==========================OnPlayerCommandText===============================// public OnPlayerCommandText(playerid, cmdtext[]){ if(!Logged[playerid]) return Message(playerid, "Çàðåãèñòðèðóéòåñü èëè âîéäèòå â èãðó!",clDarkRed); new idx = 0, pint, tgt, user[2]; new msg[max_line], cmd[max_line], tmp[max_line], name[max_line], ptext[max_line]; new Float: x, Float: y, Float: z,Float: a; GetPlayerName(playerid,name,max_line); printf("[command] [%i] %s: %s",playerid,GetName(playerid),cmdtext); format(tmp,max_line,"[%s, id: %i] %s",GetName(playerid),playerid,cmdtext); cmd = strtok(cmdtext,idx); strmid(ptext,cmdtext,idx,strlen(cmdtext)); //----------------------------------------------------------------------------// //----------------------------Àäìèí êîìàíäû-----------------------------------// //----------------------------------------------------------------------------// if(iscmd(cmd,"/alogin")){ new string[128]; if(!GivePlayerAdmin[playerid]) return 1; format(string, sizeof(string), "Ââåäèòå ïàðîëü\n\nÏàðîëü äîëæåí ñîñòîÿòü èç ëàòèíñêèõ áóêâ è öûôð\n            ðàçìåðîì îò 6 äî 15 ñèìâîëîâ.", GetName(playerid)); ShowPlayerDialog(playerid, dialog_aregister, DIALOG_STYLE_PASSWORD, "Àäìèí ðåãèñòðàöèÿ:", string, "Îê", "Îòìåíà"); return 1;} //-- Test cmds --// if(iscmd(cmd,"/giveadmin")){ GivePlayerAdmin[playerid] = 1; return 1;} //-- if(iscmd(cmd,"/give")){ GivePlayerCash(playerid,1000000); Kazna -= 1000000; SaveAccount(playerid); return 1;}  if(iscmd(cmd,"/giveinv")){ PlayerInv[playerid][1] += 1; return 1;}  if(iscmd(cmd,"/giveinvv")){ PlayerInv[playerid][2] += 1; return 1;}  if(iscmd(cmd,"/giveinv2")){ format(msg,max_line,"%d",PlayerInv[playerid][1]); Message(playerid,msg,clGreen); return 1;} //-- if(iscmd(cmd,"/giveban")){ PlayerInfo[tgt][pBanned] = 1; Kick(tgt); return 1;}  if(iscmd(cmd,"/testshow")){ for(new slot=0; slot&lt;11; slot++){ PlayerTextDrawShow(playerid, Graphinv9[playerid][slot]);} return 1;}  if(iscmd(cmd,"/testmusic")){ GetPlayerPos(tgt,x,y,z); PlayerPlaySound(playerid, 1, x,y,z); return 1;}  if(iscmd(cmd,"/testd")){ PlayerTextDrawSetPreviewModel(playerid, Graphinv[playerid],18646); PlayerTextDrawShow(playerid, Graphinv[playerid]); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/i")){ ShowLootsDialog(playerid); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/makeadmin")){                                                  // Äàòü àäìèíèñòðàòîðñêèå ïîëíîìî÷èÿ getTgt("Èñïîëüçîâàíèå: /makeadmin {FF0000}[èãðîê] [óðîâåíü]"); getInt("Èñïîëüçîâàíèå: /makeadmin [èãðîê] {FF0000}[óðîâåíü]"); if(AdminInfo[tgt][aAdmin] &lt; 1) return Message(playerid,"Ýòîò èãðîê íå àäìèíèñòðàòîð!",clDarkRed); AdminInfo[tgt][aAdmin] = pint; if(pint > 5) return Message(playerid,"Âû íå ìîæåòå äàòü áîëüøå 5 óðîâíÿ!",clDarkRed); if(pint == 0){ new query[128]; mysql_format(SQL, query, sizeof(query), "DELETE FROM `Admins` WHERE `Name` = '%s'", GetName(tgt)); mysql_tquery(SQL, query, "", ""); format(msg,max_line,"Èãðîê %s áîëüøå íå àäìèíèñòðàòîð.",GetName(tgt)); Message(tgt,"Âû áîëüøå íå àäìèíèñòðàòîð.",clDarkRed); Message(playerid,msg,clDarkRed); SaveAccount(tgt); return 1;} format(msg,max_line,"Àäìèíèñòðàòîð %s ïîâûñåë/ïîíèçåë %s íà äîëæíîñòü %s.",GetName(playerid), GetName(tgt),GetAdminName(tgt)); AMessage(msg,clLime); format(msg,max_line,"Bû áûëè ïîâûøåíû/ïîíèæåíû íà äîëæíîñòü %s.",GetAdminName(tgt)); Message(tgt,msg,clYellow); AdminInfo[tgt][aAdmin] = pint; SaveAccount(tgt); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/kick")){ restricted(1);                                        // Êèêíóòü óêàçàííîãî èãðîêà getTgt("Èñïîëüçîâàíèå: /kick {FF0000}[èãðîê] {ïðè÷èíà}"); strmid(tmp,cmdtext,idx,strlen(cmdtext)); if(playerid == tgt) return Message(playerid,"Íåëüçÿ èñïîëüçîâàòü äàííîå äåéñòâèå íà ñåáå!",clDarkRed); if(AdminInfo[playerid][aAdmin] &lt; AdminInfo[tgt][aAdmin] || IsPlayerNPC(tgt) &amp;&amp; AdminInfo[playerid][aAdmin] == 5){ Message(playerid,"Âû íå ìîæåòå êèêíóòü àäìèíèñòðàòîðà!",clDarkRed); format(msg,max_line,"Àäìèíèñòðàòîð %s õîòåë êèêíóòü àäìèíèñòðàòîðà %s.",GetName(playerid),GetName(tgt)); AMessage(msg,clLime); return 1;} KickBanPlayer(0, playerid, tgt, tmp); // Kick return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/ban")){ restricted(1);                                         // Çàáàíèòü èãðîêà getTgt("Èñïîëüçîâàíèå: /ban {FF0000}[èãðîê] {ïðè÷èíà}"); strmid(tmp,cmdtext,idx,strlen(cmdtext)); if(playerid == tgt) return Message(playerid,"Íåëüçÿ èñïîëüçîâàòü äàííîå äåéñòâèå íà ñåáå!",clDarkRed); if(AdminInfo[playerid][aAdmin] &lt; AdminInfo[tgt][aAdmin] || IsPlayerNPC(tgt) &amp;&amp; AdminInfo[playerid][aAdmin] == 5){ Message(playerid,"Âû íå ìîæåòå çàáàíèòü àäìèíèñòðàòîðà!",clDarkRed); format(msg,max_line,"Àäìèíèñòðàòîð %s õîòåë çàáàíèòü àäìèíèñòðàòîðà %s.",GetName(playerid),GetName(tgt)); AMessage(msg,clLime); return 1;} KickBanPlayer(1, playerid, tgt, tmp); // Ban return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/kickall")){ restricted(4);                                     // Êèêíóòü âñåõ èãðîêîâ ñ ñåðâåðà SendClientMessageToAll(clRed,"Âñå èãðîêè ñåðâåðà áûëè êèêíóòû ÷åðåç êîíñîëü."); for(new i=0; i&lt;max_players; i++){ if(IsPlayerConnected(i) &amp;&amp; AdminInfo[i][aAdmin] == 0){ Kick(i);}} print("You are kick all players from server."); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/cfg")){ restricted(5);                                         // Ïàðàìåòðû ñåðâåðà. tmp = strtok(cmdtext,idx); if(!strlen(tmp)){ Message(playerid,"Èñïîëüçîâàíèå: /cfg [ïàðàìåòð] {çíà÷åíèå}",clWhite); Message(playerid,"Äîñòóïíûå ïàðàìåòðû: report, kazna.",clWhite); return 1;} if(iscmd(tmp,"report")){ tmp = strtok(cmdtext,idx); if(!strlen(tmp)){ format(msg,max_line,"REPORT: %i",Report); Message(playerid,msg,clYellow); return 1;} pint = strval(tmp); if(!pint) pint = 0; Report = pint; } else if(iscmd(tmp,"kazna")){ tmp = strtok(cmdtext,idx); if(!strlen(tmp)){ format(msg,max_line,"KAZNA: %i",Kazna); Message(playerid,msg,clYellow); return 1;} pint = strval(tmp); if(pint&lt;0 || pint>100000000){ Message(playerid,"Íåêîðåòíîå êîëè÷åñòâî.",clYellow); return 1;} Kazna = pint; } else { Message(playerid,"Íåèçâåñòíûé ïàðàìåòð",clDarkRed); return 1;} Message(playerid,"Èíôîðìàöèÿ îáíîâëåíà",clYellow); SaveConfig(); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/mkld") || iscmd(cmd,"/makeleader")){ restricted(5);            // Íàçíà÷èòü èãðîêà ëèäåðîì óêàçàííîé ôðàêöèè getTgt("Èñïîëüçîâàíèå: /makeleader {FF0000}[èãðîê] [ôðàêöèÿ]"); checkplayer(tgt); getInt("Èñïîëüçîâàíèå: /makeleader [èãðîê] {FF0000}[ôðàêöèÿ]"); if(5 &lt; pint &lt; 0) return Message(playerid,"Íåëüçÿ áîëüøå 5!",clDarkRed); if(pint == 0){ format(msg,max_line,"Èãðîê %s áîëüøå íå ëèäåð ôðàêöèè.",GetName(tgt)); Message(tgt,"Âû áîëüøå íå ëèäåð ôðàêöèè.",clDarkRed); Message(playerid,msg,clDarkRed); SetPlayerFaction(tgt,0,0); SetPlayerFactionColor(tgt,0); SaveAccount(tgt); return 1;} SetPlayerFaction(tgt,pint,MaxFactionRank[pint]); SetPlayerFactionColor(tgt,pint); format(msg,max_line,"Bû íàçíà÷åíû ëèäåðîì ôðàêöèè %i (%s).",pint,FactionNames[pint]); Message(tgt,msg,clYellow); if(tgt != playerid){ format(msg,max_line,"%s íàçíà÷åí ëèäåðîì ôðàêöèè %i (%s).",GetName(tgt),pint,FactionNames[pint]); Message(playerid,msg,clYellow);} SaveAccount(tgt); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/report")){                                                     // Æàëîáà àäìèíèñòðàöèè strmid(tmp,cmdtext,idx,strlen(cmdtext)); if(!strlen(tmp)){ Message(playerid,"Èñïîëüçîâàíèå: /report {FF0000}[òåêñò]"); return 1;} if(Report == 0){ Message(playerid,"Ðåïîðò îòêëþ÷¸í àäìèíèñòðàöèåé.",clDarkRed); return 1;} if(ReportDelay[playerid]){ format(msg,max_line,"Â ðåïîðò ìîæíî ïèñàòü ðàç â 45 ñåêóíä. Îñòàëîñü: %i ñåê.",ReportDelay[playerid]); Message(playerid,msg,clDarkRed); return 1;} ReportDelay[playerid] = 45; Message(playerid,"Âàøå ñîîáùåíèå áûëî óñïåøíî îòïðàâëåíî àäìèíèñòðàöèè ñåðâåðà.",clYellow); format(msg,max_line,"REPORT: %s (id: %i): %s",name,playerid,tmp); AMessage(msg,clGreen); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/a")){ restricted(1);                                           // Àäìèí ÷àò strmid(tmp,cmdtext,idx,strlen(cmdtext)); if(!strlen(tmp)){ Message(playerid,"Èñïîëüçîâàíèå: /a {FF0000}[òåêñò]"); return 1;} format(msg,max_line,"%s %s[%i]: %s",GetAdminName(playerid),name,playerid,tmp); AMessage(msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/prop")){ restricted(5);                                        // Íàñòðîéêà ñîáñòâåíîñòè getInt("Èñïîëüçîâàíèå: /prop {FF0000}[id] [ïàðàìåòð] {çíà÷åíèå}"); new i = pint, id = 1272; if(HouseInfo[i][hPrice]>0) id = 1273; if(i&lt;0 || i>=max_houses){ Message(playerid,"Íåäîïóñòèìîå çíà÷åíèå (id)",clDarkRed); return 1;} getStr("Èñïîëüçîâàíèå: /prop [id] {FF0000}[ïàðàìåòð|goto] {çíà÷åíèå}"); if(iscmd(tmp,"goto")) { SetPlayerInterior(playerid,0); SetPlayerVirtualWorld(playerid,0); SetPlayerPos(playerid,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ]); SetPlayerFacingAngle(playerid,HouseInfo[i][hPosR]); SetCameraBehindPlayer(playerid); return 1; } else if(iscmd(tmp,"owner")) { scopy(hOwner[i],strtok(cmdtext,idx)); } else if(iscmd(tmp,"price")) { getInt("Âû íå óêàçàëè ñòîèìîñòü"); if(pint&lt;0 || pint>5000000) { Message(playerid,"Íåêîððåêòíàÿ ñòîèìîñòü",clDarkRed); return 1;} HouseInfo[i][hPrice] = pint; if(HouseInfo[i][hPrice]>0){ if(HouseInfo[i][hPickupID]) DestroyPickup(HouseInfo[i][hPickupID]); HouseInfo[i][hPickupID] = CreatePickup(1273,23,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ]); } else { if(HouseInfo[i][hPickupID]) DestroyPickup(HouseInfo[i][hPickupID]); HouseInfo[i][hPickupID] = CreatePickup(1272,23,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ]);} } else if(iscmd(tmp,"intr")) { getInt("Âû íå óêàçàëè id èíòåðüåðà"); HouseInfo[i][hIntr] = pint; } else if(iscmd(tmp,"epos")) { GetPlayerPos(playerid,HouseInfo[i][hEPosX],HouseInfo[i][hEPosY],HouseInfo[i][hEPosZ]); GetPlayerFacingAngle(playerid,HouseInfo[i][hEPosR]); HouseInfo[i][hIntr] = GetPlayerInterior(playerid); } else if(iscmd(tmp,"pos")) { GetPlayerPos(playerid,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ]); GetPlayerFacingAngle(playerid,HouseInfo[i][hPosR]); if(HouseInfo[i][hPickupID]) DestroyPickup(HouseInfo[i][hPickupID]); HouseInfo[i][hPickupID] = CreatePickup(id,23,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ]); } else { Message(playerid,"Äîïóñòèìûå ïàðàìåòðû: pos, cpos, price, owner"); return 1;} if(strlen(hOwner[i])&lt;3) hOwner[i] = "no-one"; Message(playerid,"Èíôîðìàöèÿ îáíîâëåíà"); SaveProp(i); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/propadd")){ restricted(3);                                     // Ñîçäàòü ñîáñòâåíîñòü getInt("Èñïîëüçîâàíèå: /propadd {ff0000}[ñòîèìîñòü]"); if(pint&lt;0 || pint>10000000) { Message(playerid,"Íåêîððåêòíàÿ ñòîèìîñòü!",clDarkRed); return 1;} GetPlayerPos(playerid,x,y,z); GetPlayerFacingAngle(playerid, a); PropCreate(0, 0, pint, x, y, z, a); SetIcons(playerid); new id = GetNearestHouses(playerid,1.0); format(msg,max_line,"Cîáñòâåííîñòü äîáàâëåíà, id: %d",id); Message(playerid,msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/bizadd")){ restricted(4);                                      // Ñîçäàòü áèçíåñ getInt("Èñïîëüçîâàíèå: /bizadd {ff0000}[ñòîèìîñòü]"); if(pint&lt;0 || pint>10000000) { Message(playerid,"Íåêîððåêòíàÿ ñòîèìîñòü!",clDarkRed); return 1;} GetPlayerPos(playerid,x,y,z); GetPlayerFacingAngle(playerid, a); BizCreate(0, 0, pint, x, y, z, a); new id = GetNearestBiznes(playerid,1.0); format(msg,max_line,"Áèçíåñ äîáàâëåí, id: %d",id); Message(playerid,msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/spec")){ restricted(1);                                        // Ñëåæêà çà èãðîêîì tmp = strtok(cmdtext,idx); if(!strlen(tmp)) { if(SpectateType[playerid] == 0) { Message(playerid,"Èñïîëüçîâàíèå: /spec [èãðîê]",clWhite); } else { SpectateStop(playerid); GameTextForPlayer(playerid,"~r~Spec off",1000,4);} return 1;} user[0] = ReturnUser(tmp); if(!IsPlayerConnected(user[0])) return Message(playerid,"Íåò òàêîãî èãðîêà!",clDarkRed); if(playerid == user[0]) return Message(playerid,"Íåëüçÿ ñëåäèòü çà ñàìèì ñîáîé!",clDarkRed); if(SpectateType[user[0]] == 1) return format(msg,100,"Àäìèíèñòðàòîð %s íàáëþäàåò çà èãðîêîì %s.",GetName(user[0]),GetName(AdminSpecID[user[0]])),Message(playerid,msg); SaveAccount(playerid); SpectateStart(playerid, user[0]); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/goto")){ restricted(1);                                        // Òåëåïîðòèðîâàòüñÿ ê óêàçàííîìó èãðîêó getTgt("Èñïîëüçîâàíèå: /goto {ff0000}[èãðîê]"); /*if(GetPlayerState(tgt) == PLAYER_STATE_SPECTATING){ format(msg,max_line,"Àäìèíèñòðàòîð %s íàáëþäàåò çà èãðîêîì %s.",GetName(tgt),GetName(SpectateID[tgt])); return 1;}*/ Message(playerid,msg); GetPlayerFacingPoint(tgt,x,y,z,-2.0); SetPlayerInterior(playerid,GetPlayerInterior(tgt)); SetPlayerVirtualWorld(playerid,GetPlayerVirtualWorld(tgt)); TeleportPlayer(playerid,x,y,z,a,0,0); GetPlayerFacingAngle(tgt,x); SetPlayerFacingAngle(playerid,x); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/gethere")){ restricted(2);                                     // Òåëåïîðòèðîâàòü óêàçàííîãî èãðîêà ê ñåáå getTgt("Èñïîëüçîâàíèå: /gethere {ff0000}[èãðîê]"); /*if(GetPlayerState(tgt) == PLAYER_STATE_SPECTATING){ format(msg,max_line,"Àäìèíèñòðàòîð %s íàáëþäàåò çà èãðîêîì %s.",GetName(tgt),GetName(SpectateID[tgt])); return 1;}*/ GetPlayerFacingPoint(playerid,x,y,z,2.0); SetPlayerInterior(tgt,GetPlayerInterior(playerid)); SetPlayerVirtualWorld(tgt,GetPlayerVirtualWorld(playerid)); TeleportPlayer(tgt,x,y,z,a,0,0); GetPlayerFacingAngle(playerid,x); SetPlayerFacingAngle(tgt,x); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/delacc")){ restricted(4);                                      // Óäàëèòü àêêàóíò èãðîêà new query[128]; getTgt("Èñïîëüçîâàíèå: /delacc {FF0000}[èãðîê]"); mysql_format(SQL, query, sizeof(query), "DELETE FROM `Users` WHERE `Name` = '%s'", GetName(tgt)); mysql_tquery(SQL, query, "", ""); format(msg,max_line,"Àêêàóíò èãðîêà %s óñïåøíî óäàë¸í.",GetName(tgt)); Message(playerid,msg,clGreen); Kick(tgt); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/tpc")){ restricted(4);                                         // Ñîçäàòü òåëåïîðò new intr = GetPlayerInterior(playerid); GetPlayerPos(playerid,x,y,z); tpCreate(0,intr,x,y,z); new id = GetNearestTP(playerid,1.0); format(msg,max_line,"Tåëåïîðò ñîçäàí, id: %d",id); Message(playerid,msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/tpd")){ restricted(4);                                         // Çàäàòü êîíå÷íóþ ïîçèöèþ óêàçàííîãî òåëåïîðòà getInt("Èñïîëüçîâàíèå: /tpd {FF0000}[id]"); tpSetDPos(pint,playerid); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/tpdel")){ restricted(4);                                       // Óäàëèòü óêàçàíûé òåëåïîðò getInt("Èñïîëüçîâàíèå: /tpdel {FF0000}[id]"); DestroyTeleport(pint); Message(playerid,"Âû óñïåøíî óäàëèëè òåëåïîðò."); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/tpgoto")){ restricted(4);                                      // Òåëåïîðòèðîâàòüñÿ â èñõîäíóþ ïîçèöèþ óêàçàííîãî òåëåïîðòà getInt("Èñïîëüçîâàíèå: /tpgoto {FF0000}[id]"); SetPlayerPos(playerid,TeleportInfo[pint][tpSPos][0],TeleportInfo[pint][tpSPos][1],TeleportInfo[pint][tpSPos][2]); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/tpf")){ restricted(4); getInt("Èñïîëüçîâàíèå: /tpf {FF0000}[id] [ôðàêöèÿ]"); new id = pint; getInt("Èñïîëüçîâàíèå: /tpf [id] {FF0000}[ôðàêöèÿ]"); TeleportInfo[id][tpFaction] = pint; Message(playerid,"Ôðàêöèÿ èçìåíåíà."); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/tinfo")){ restricted(3);                                       // Èíôîðìàöèÿ î áëèæíåì òåëåïîðòå. new id = GetNearestTP(playerid,1.0); if(id &lt; 0){ Message(playerid,"Ïî áëèçîñòè íåò íèêàêèõ òåëåïîðòîâ!",clDarkRed); return 1;} format(msg,max_line,"ID: %d, F: %d",id,TeleportInfo[id][tpFaction]); Message(playerid,msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/propinfo")){ restricted(3);                                    // Èíôîðìàöèÿ î áëèæíåì äîìå. new id = GetNearestHouses(playerid,1.0); if(id &lt; 0){ Message(playerid,"Ïî áëèçîñòè íåò äîìîâ!",clDarkRed); return 1;} format(msg,max_line,"ID: %d, Price: %d, Owner: %s, Intr: %d",id,HouseInfo[id][hPrice], hOwner[id], HouseInfo[id][hIntr]); Message(playerid,msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/propdel")){ restricted(4);                                     // Óäàëèòü óêàçàíûé äîì getInt("Èñïîëüçîâàíèå: /propdel {FF0000}[id]"); RemovePlayerMapIcon(playerid,PropIcon[pint][playerid]); DestroyHouse(pint); Message(playerid,"Äîì óñïåøíî óäàë¸í."); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/setskin")){ restricted(4);                                     // Óñòàíîâèòü ñêèí óêàçàííîìó èãðîêó getTgt("Èñïîëüçîâàíèå: /setskin {FF0000}[èãðîê] [ñêèí]"); checkplayer(tgt); getInt("Èñïîëüçîâàíèå: /setskin [èãðîê] {FF0000}[ñêèí]"); new s = pint; if(s&lt;0 || s>299){ Message(playerid,"Íåò òàêîãî ñêèíà!",clDarkRed); return 1;} format(msg,max_line,"Àäìèíèñòðàòîð %s, óñòàíîâèë âàì %i ñêèí.",GetName(playerid), s); Message(playerid, msg, clYellow); format(msg,max_line,"Àäìèíèñòðàòîð %s, óñòàíîâèë èãðîêó %s %i ñêèí.",GetName(playerid), GetName(tgt), s); AMessage(msg, clGreen); SetPlayerSkin(tgt, s); PlayerInfo[tgt][pSkin] = s; SaveAccount(tgt); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/v") || iscmd(cmd,"/veh")){ restricted(5);                      // Ñîçäàòü òðàíñïîðò getInt("Èñïîëüçîâàíèå: /veh {ff0000}[id] [öâåò 1] [öâåò 2]"); new model = strval(tmp); if(model &lt; 400 || model > 611) return Message(playerid,"ID òðàíñïîðòíîãî ñðåäñòâà: [400-611]",clWhite); tmp = strtok(cmdtext,idx); new color1 = strval(tmp); tmp = strtok(cmdtext,idx); new color2 = strval(tmp); GetPlayerPos(playerid,x,y,z); GetPlayerFacingAngle(playerid,a); CreateVehicles(playerid, model, color1, color2, x, y+4.0, z, a); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/delveh")){ restricted(4);                                      // Óäàëèòü óêàçàíûé òðàíñïîðò getInt("Èñïîëüçîâàíèå: /delveh {FF0000}[id]"); DestroyVehicles(pint); Message(playerid,"Ìàøèíà óñïåøíî óäàëåíà."); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/nc")){ restricted(4);                                          // Óçíàòü ID áëèæàéøåé ìàøèíû new vid = GetPlayerNearVehicle(playerid,2.0); if(!vid){ Message(playerid,"Ïîáëèçîñòè íåò àâòîìîáèëåé!",clDarkRed); return 1;} format(msg,max_line,"%s: %i",CarName[GetVehicleModel(vid)-400],vid); Message(playerid,msg,clYellow); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/xyz")){ restricted(3);                                         // Òåëåïîðòèðîâàòüñÿ íà óêàçàíóþ êîîðäèíàòó. tmp = strtok(cmdtext,idx); x = floatstr(tmp); tmp = strtok(cmdtext,idx); y = floatstr(tmp); tmp = strtok(cmdtext,idx); z = floatstr(tmp); TeleportPlayer(playerid,x,y,z,a,0,0); return 1;} //----------------------------------------------------------------------------//  //----------------------------------------------------------------------------// //----------------------------Êîìàíäû èãðîêîâ---------------------------------// //----------------------------------------------------------------------------// if(iscmd(cmd,"/ep")){ new id = GetPlayerVirtualWorld(playerid); //if(PlayerInfo[playerid][pCuffed] > 0) return 1; if(IsPlayerInRangeOfPoint(playerid,2.0,HouseInfo[id][hEPosX],HouseInfo[id][hEPosY],HouseInfo[id][hEPosZ])){ SetPlayerInterior(playerid,0); SetPlayerVirtualWorld(playerid,0); SetPlayerPos(playerid,HouseInfo[id][hPosX],HouseInfo[id][hPosY],HouseInfo[id][hPosZ]); SetPlayerFacingAngle(playerid,HouseInfo[id][hPosR]); SetCameraBehindPlayer(playerid); return 1;} id = GetNearestHouses(playerid,2.0); if(id == -1) return 1; if(IsPlayerInRangeOfPoint(playerid,2.0,HouseInfo[id][hPosX],HouseInfo[id][hPosY],HouseInfo[id][hPosZ]) &amp;&amp; id >= 0){ if(HouseInfo[id][hOpen] == 0) return GameTextForPlayer(playerid,"~r~Closed",1000,6); SetPlayerInterior(playerid,HouseInfo[id][hIntr]); SetPlayerVirtualWorld(playerid,id); SetPlayerPos(playerid,HouseInfo[id][hEPosX],HouseInfo[id][hEPosY],HouseInfo[id][hEPosZ]); SetPlayerFacingAngle(playerid,HouseInfo[id][hEPosR]); SetCameraBehindPlayer(playerid); TogglePlayerControllable(playerid,0); SetTimerEx("Unfreze",2000,0,"%i",playerid); return 1;} return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/buybiz")){ for(new id=0; id&lt;max_biznes; id++) if(IsPlayerInRangeOfPoint(playerid,distance_close,BiznesInfo[id][bSPos][0],BiznesInfo[id][bSPos][1],BiznesInfo[id][bSPos][2])){ if(BiznesInfo[id][bPrice]&lt;1) return Message(playerid,"Ýòà ñîáñòâåííîñòü íå ïðîäàåòñÿ",clDarkRed); if(BiznesInfo[id][bPrice] > PlayerInfo[playerid][pMoney]) return Message(playerid,"Ó âàñ íåäîñòàòî÷íî íàëè÷íûõ äåíåã",clDarkRed); UnGivePlayerCash(playerid, BiznesInfo[id][bPrice]); format(msg,max_line,"Bû êóïèëè íîâûé áèçíåñ çà $%i, ïîçäðàâëÿåì ñ ïðèîáðåòåíèåì!",BiznesInfo[id][bPrice]); Message(playerid,msg,clYellow); scopy(bOwner[id],name); BiznesInfo[id][bPrice] = 0; BiznesInfo[id][bOpen] = 1; SaveBiz(id);} return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/buyprop")){ for(new id=0; id&lt;max_houses; id++) if(IsPlayerInRangeOfPoint(playerid,distance_close,HouseInfo[id][hPosX],HouseInfo[id][hPosY],HouseInfo[id][hPosZ])){ if(HouseInfo[id][hPrice]&lt;1) return Message(playerid,"Ýòà ñîáñòâåííîñòü íå ïðîäàåòñÿ",clDarkRed); if(HouseInfo[id][hPrice] > PlayerInfo[playerid][pMoney]) return Message(playerid,"Ó âàñ íåäîñòàòî÷íî íàëè÷íûõ äåíåã",clDarkRed); UnGivePlayerCash(playerid, HouseInfo[id][hPrice]); DestroyPickup(HouseInfo[id][hPickupID]); HouseInfo[id][hPickupID] = CreatePickup(1272,23,HouseInfo[id][hPosX],HouseInfo[id][hPosY],HouseInfo[id][hPosZ]); format(msg,max_line,"Bû êóïèëè íîâûé äîì çà $%i, ïîçäðàâëÿåì ñ ïðèîáðåòåíèåì!",HouseInfo[id][hPrice]); Message(playerid,msg,clYellow); scopy(hOwner[id],name); HouseInfo[id][hPrice] = 0; HouseInfo[id][hOpen] = 1; SaveProp(id);} return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/sellprop")){ new id = GetNearestHouses(playerid); getInt("Èñïîëüçîâàíèå: /sellprop {ff0000}[ñòîèìîñòü]"); if((pint &lt; 0 || pint > 10000000) &amp;&amp; pint!=0){ Message(playerid,"Íåêîððåêòíàÿ ñòîèìîñòü",clDarkRed); return 1;} if(pint){ if(!HouseInfo[id][hPrice]) Message(playerid,"Ñîáñòâåííîñòü âûñòàâëåíà íà ïðîäàæó",clYellow), DestroyPickup(HouseInfo[id][hPickupID]), HouseInfo[id][hPickupID] = CreatePickup(1273,23,HouseInfo[id][hPosX],HouseInfo[id][hPosY],HouseInfo[id][hPosZ]); else Message(playerid,"Ñòîèìîñòü ñîáñòâåííîñòè èçìåíåíà",clYellow); } else Message(playerid,"Ñòîèìîñòü ñíÿòà ñ ïðîäàæè",clYellow), DestroyPickup(HouseInfo[id][hPickupID]), HouseInfo[id][hPickupID] = CreatePickup(1272,23,HouseInfo[id][hPosX],HouseInfo[id][hPosY],HouseInfo[id][hPosZ]); HouseInfo[id][hPrice] = pint; SaveProp(id); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/open")){ new id = GetNearestHouses(playerid); if(id&lt;0) return Message(playerid,"Ïîáëèçîñòè íåò äîìîâ èëè áèçíåñîâ",clDarkRed); Message(playerid,"Âû îòêðûëè äâåðü â äîì.",clGreen); HouseInfo[id][hOpen] = 1; SaveProp(id); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/close")){ new id = GetNearestHouses(playerid); if(id&lt;0) return Message(playerid,"Ïîáëèçîñòè íåò äîìîâ èëè áèçíåñîâ",clDarkRed); Message(playerid,"Âû çàêðûëè äâåðü â äîì.",clDarkRed); HouseInfo[id][hOpen] = 0; SaveProp(id); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/r")){ new f = PlayerInfo[playerid][pFaction]; if(f == 0){ Message(playerid,"Ó âàñ íåò ðàöèè!",clDarkRed); return 1;} strmid(tmp,cmdtext,idx,strlen(cmdtext)); if(strlen(tmp) == 0){ Message(playerid,"Èñïîëüçîâàíèå: /r [òåêñò]"); return 1;} format(msg,max_line,">>> [%s] %s: %s",FactionRangNames[f][PlayerInfo[playerid][pRank]],name,tmp); FMessage(f,1,msg,GetPlayerColor(playerid)); return 1;} //----------------------------------------------------------------------------// Êîìàíäû äëÿ ëèäåðîâ. if(iscmd(cmd,"/invite")){ if(PlayerInfo[playerid][pRank] &lt; MaxFactionRank[PlayerInfo[playerid][pFaction]]){ Message(playerid,"Âû íå ìîæåòå ïðèãëàøàòü äðóãèõ èãðîêîâ, òàê êàê íå ÿâëÿåòåñü ëèäåðîì ôðàêöèè!",clDarkRed); return 1;} getTgt("Èñïîëüçîâàíèå: /invite {FF0000}[èãðîê]"); checkdistance(playerid,tgt,distance_normal); if(PlayerInfo[tgt][pFaction] != 0){ Message(playerid,"Íåëüçÿ ïðèãëàñèòü ýòîãî èãðîêà, òàê êàê îí óæå ñîñòîèò âî ôðàêöèè!",clDarkRed); return 1;} new f = PlayerInfo[playerid][pFaction]; format(msg,max_line,"%s ïðåäëaãàåò Âàì âñòóïèòü\nâ åãî ôðàêöèþ {00FF00} %s",name,FactionNames[f]); ShowPlayerDialog(tgt,dialog_invite,DIALOG_STYLE_MSGBOX,"Ëèäåð:",msg,"Äà","Íåò"); format(msg,max_line,"Âû âûñëàëè ïðèãëàøåíèå èãðîêó %s.",GetName(tgt)); Message(playerid,msg,clYellow); Perevod[tgt] = playerid; return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/uninvite")){ if(PlayerInfo[playerid][pRank] &lt; MaxFactionRank[PlayerInfo[playerid][pFaction]]){ Message(playerid,"Âû íå ìîæåòå âûãîíÿòü äðóãèõ èãðîêîâ, òàê êàê íå ÿâëÿåòåñü ëèäåðîì èëè çàìîì êàêîé-ëèáî ôðàêöèè",clDarkRed); return 1;} getTgt("Èñïîëüçîâàíèå: /uninvite {FF0000}[èãðîê]"); if(Logged[tgt] == false) return Message(playerid,"Ýòîò èãðîê åù¸ íå àâòîðèçîâàëñÿ!",clDarkRed); if(PlayerInfo[tgt][pFaction]!=PlayerInfo[playerid][pFaction]) return Message(playerid,"Ýòîò èãðîê íå ÿâëÿåòñÿ ÷ëåíîì âàøåé ôðàêöèè",clDarkRed); if(playerid == tgt) return Message(playerid, "Âû íå ìîæåòå âûêèíóòü èç îðãàíèçàöèè ñåáÿ",clDarkRed); if(PlayerInfo[tgt][pRank] == MaxFactionRank[PlayerInfo[tgt][pFaction]]) return Message(playerid,"Âû íå ìîæåòå óâîëèòü ëèäåðà.",clDarkRed); format(msg,max_line,"%s âûãíàë âàñ èç ñâîåé ôðàêöèè.",name); Message(tgt,msg,clDarkRed); format(msg,max_line,"Bû âûãíàëè %s èç ñâîåé ôðàêöèè.",GetName(tgt)); Message(playerid,msg,clDarkRed); SetPlayerFaction(tgt,0,0); SetPlayerFactionColor(tgt,0); SaveAccount(tgt); return 1;} //----------------------------------------------------------------------------// if(iscmd(cmd,"/giverank")){ if(PlayerInfo[playerid][pRank] &lt; MaxFactionRank[PlayerInfo[playerid][pFaction]]) return Message(playerid,"Âû íå ìîæåòå èçìåíÿòü ðàíã èãðîêàì, òàê êàê íå ÿâëÿåòåñü ëèäåðîì ôðàêöèè!",clDarkRed); format(msg,max_line,"Èñïîëüçîâàíèå: /giverank {FF0000}[èãðîê] [ðàíã(1-%d)]",MaxFactionRank[PlayerInfo[playerid][pFaction]]); getTgt(msg); if(tgt==playerid) return Message(tgt," Çà÷åì âàì èçìåíÿòü ñåáå ðàíã? Âû è òàê ëèäåð!",clYellow); if(PlayerInfo[tgt][pFaction]!=PlayerInfo[playerid][pFaction]) return Message(playerid,"Ýòîò èãðîê íå ÿâëÿåòñÿ ÷ëåíîì âàøåé ôðàêöèè!",clDarkRed); format(msg,max_line,"Èñïîëüçîâàíèå: /giverank [èãðîê] {FF0000}[ðàíã(1-%d)]",MaxFactionRank[PlayerInfo[playerid][pFaction]]); getInt(msg); if(pint&lt;1 || pint>MaxFactionRank[PlayerInfo[playerid][pFaction]]){ format(msg,max_line,"Ðàíã äîëæåí ëåæàòü äèàïàçîíå îò {FF0000}1 äî %d",MaxFactionRank[PlayerInfo[playerid][pFaction]]); return Message(playerid,msg,clDarkRed);} if(PlayerInfo[tgt][pRank] == pint) return Message(playerid,"Ýòîò èãðîê óæå èìååò ýòîò ðàíã!",clDarkRed); new ftgt = PlayerInfo[tgt][pFaction]; format(msg,max_line,"%s èçìåíèë âàø ðàíã ñ '%s' íà '%s'",name,FactionRangNames[ftgt][PlayerInfo[tgt][pRank]],FactionRangNames[ftgt][pint]); Message(tgt,msg,clYellow); format(msg,max_line,"Bû èçìåíèëè ðàíã %s ñ '%s' íà '%s'",GetName(tgt),FactionRangNames[ftgt][PlayerInfo[tgt][pRank]],FactionRangNames[ftgt][pint]); Message(playerid,msg,clYellow); //format(msg, sizeof(msg), "%s ïåðåäàë îäåæäó %s",name,FactionRangNames[ftgt][PlayerInfo[ftgt][pRank]]); //format(msg, sizeof(msg), "%s âçÿë è ïåðåîäåë îäåæäó %s",GetName(tgt),FactionRangNames[ftgt][PlayerInfo[ftgt][pRank]]); SetPlayerFaction(tgt,PlayerInfo[playerid][pFaction],pint); SaveAccount(tgt); return 1;} //----------------------------------------------------------------------------// return Message(playerid,"Íåò òàêîé êîìàíäû.",clWhite);}// Êîíåö public OnPlayerCommandText(playerid, cmdtext[]) //==========================OnPlayerEnterVehicle==============================// public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger) { 	return 1; }  public OnPlayerExitVehicle(playerid, vehicleid){ new vid = GetPlayerNearVehicle(playerid,2.0); SaveVehicles(vid); return 1;}  public OnPlayerStateChange(playerid, newstate, oldstate){ //-- if(SpectateType[AdminSpecID[playerid]] == 1){ SpectateStart(AdminSpecID[playerid], playerid);} //-- if(newstate == PLAYER_STATE_DRIVER){  } //-- if(oldstate == PLAYER_STATE_DRIVER){  } //-- return 1;}  public OnPlayerEnterCheckpoint(playerid) { 	return 1; }  public OnPlayerLeaveCheckpoint(playerid) { 	return 1; }  public OnPlayerEnterRaceCheckpoint(playerid) { 	return 1; }  public OnPlayerLeaveRaceCheckpoint(playerid) { 	return 1; }  public OnRconCommand(cmd[]) { 	return 1; }  public OnPlayerRequestSpawn(playerid) { 	return 1; }  public OnObjectMoved(objectid) { 	return 1; }  public OnPlayerObjectMoved(playerid, objectid) { 	return 1; }  public OnPlayerPickUpPickup(playerid, pickupid) { 	return 1; }  public OnVehicleMod(playerid, vehicleid, componentid) { 	return 1; }  public OnVehiclePaintjob(playerid, vehicleid, paintjobid) { 	return 1; }  public OnVehicleRespray(playerid, vehicleid, color1, color2) { 	return 1; }  public OnPlayerSelectedMenuRow(playerid, row) { 	return 1; }  public OnPlayerExitedMenu(playerid) { 	return 1; }  public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid){ SetIcons(playerid); return 1;}  public OnPlayerKeyStateChange(playerid, newkeys, oldkeys){ //-- Ñèñòåìà òåëåïîðòîâ --// if(newkeys == KEY_WALK){ if(!IsPlayerInAnyVehicle(playerid)) { SetPVarInt(playerid, "NoAB", 1); new f = PlayerInfo[playerid][pFaction]; for(new i=0; i&lt;max_tps; i++){ if(PlayerToPoint(1.5,playerid,TeleportInfo[i][tpSPos][0],TeleportInfo[i][tpSPos][1],TeleportInfo[i][tpSPos][2]) &amp;&amp; (f== TeleportInfo[i][tpFaction] || !TeleportInfo[i][tpFaction]) &amp;&amp; TeleportInfo[i][tpDPos][0]!=0.0) { SetPlayerInterior(playerid,TeleportInfo[i][tpIntr]); SetPlayerPos(playerid,TeleportInfo[i][tpDPos][0],TeleportInfo[i][tpDPos][1],TeleportInfo[i][tpDPos][2]); SetPlayerFacingAngle(playerid,TeleportInfo[i][tpDPos][3]); SetTimerEx("Unfreze",1000,0,"%i",playerid); TogglePlayerControllable(playerid,0); SetCameraBehindPlayer(playerid);}} OnPlayerCommandText(playerid,"/ep");} return 1;} //== if(newkeys == KEY_YES){ new statscat[26], statscatcount = 0, statsrank[51]; HideItemList(playerid); ShowItemList(playerid); //-- for(new i=CatA; i&lt;CatG+1; i++){ if(LicenseInfo[playerid][i]){ statscatcount += 1; format(statscat,26,"Licenses: %s",CatName[i]); PlayerTextDrawSetString(playerid, TextDrawInvLicenses[playerid],statscat); }else{ statscat = "Íåòó";}} //-- new f = PlayerInfo[playerid][pFaction]; new r = PlayerInfo[playerid][pRank]; if(r) format(statsrank,51,"Fraction: %s - %s", FactionNames[f],FactionRangNames[f][r]); else statsrank = "Íåò"; PlayerTextDrawSetString(playerid, TextDrawInvFraction[playerid],statsrank);  TextDrawShowForPlayer(playerid, TextDrawInvFon); TextDrawShowForPlayer(playerid, TextDrawInvMenu); TextDrawShowForPlayer(playerid, TextDrawInvPocket); TextDrawShowForPlayer(playerid, TextDrawInvPack); TextDrawShowForPlayer(playerid, TextDrawInvCar); TextDrawShowForPlayer(playerid, TextDrawInvShop); PlayerTextDrawShow(playerid, TextDrawInvLicenses[playerid]); PlayerTextDrawShow(playerid, TextDrawInvFraction[playerid]); PlayerTextDrawShow(playerid, TextDrawInvSkin[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems2[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems3[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems4[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems5[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems6[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems7[playerid]); PlayerTextDrawShow(playerid, TextDrawInvItems8[playerid]);} //==  return 1;}  public OnRconLoginAttempt(ip[], password[], success) { 	return 1; }  public OnPlayerUpdate(playerid){ new h,m,s; gettime(h,m,s);  if(s!=LastSecond[playerid]) { new vid = GetPlayerVehicleID(playerid); if(s%10==0 &amp;&amp; vid) SaveVehicles(vid); if(s%3==0) SetIcons(playerid); LastSecond[playerid] = s;} return 1;}  public OnPlayerStreamIn(playerid, forplayerid) { 	return 1; }  public OnPlayerStreamOut(playerid, forplayerid) { 	return 1; }  public OnVehicleStreamIn(vehicleid, forplayerid) { 	return 1; }  public OnVehicleStreamOut(vehicleid, forplayerid) { 	return 1; }  public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[]){ new msg[max_line]; //-- dialogid == 0 if(dialogid == dialog_loot &amp;&amp; response){ new Float:p[3]; GetPlayerPos(playerid, p[0], p[1], p[2]); CreateDroppedInv(listitem+1, p[0], p[1], p[2]); ShowLootsDialog(playerid); return 1;} //-- dialogid == 1 if(dialogid == dialog_login){ if(!response) return Kick(playerid); if(strlen(inputtext) &lt; 6) return ShowPlayerDialog(playerid, dialog_login, DIALOG_STYLE_PASSWORD, "Àâòîðèçàöèÿ!","íå âåðíûé ïàðîëü:","Îê", "Îòìåíà"); if(strcmp(inputtext, PlayerInfo[playerid][pPassword]) == 0){ new query2[128]; mysql_format(SQL, query2, sizeof(query2), "SELECT * FROM `Admins` WHERE `Name` = '%e' LIMIT 1", GetName(playerid)); mysql_tquery(SQL, query2, "OnAdminDataLoaded", "dd", playerid, MysqlRaceCheck[playerid]); }else{ LoginAttempts[playerid]++; if(LoginAttempts[playerid] >= 3){ Kick(playerid);} else ShowPlayerDialog(playerid, dialog_login, DIALOG_STYLE_PASSWORD, "Àâòîðèçàöèÿ, íå âåðíûé ïàðîëü!", "Ââåäèòå ïàðîëü â ïîëå íèæå:", "Îê", "Îòìåíà");} return 1;} //-- dialogid == 2 if(dialogid == dialog_register){ if(!response) return Kick(playerid); if(strlen(inputtext) &lt; 6) return ShowPlayerDialog(playerid, dialog_register, DIALOG_STYLE_PASSWORD, "Ðåãèñòðàöèÿ, ïàðîëü äîëæåí áûòü íå êîðî÷å 6 ñèìâîëîâ!", "Ââåäèòå âàø íîâûé ïàðîëü â ïîëå íèæå:","Îê", "Îòìåíà"); new query[512]; mysql_format(SQL, query, sizeof(query), "INSERT INTO `Users` (`Name`, `Password`) VALUES ('%e', '%s')", GetName(playerid), inputtext); mysql_tquery(SQL, query, "OnPlayerRegister", "d", playerid); return 1;} //-- dialogid == 3 if(dialogid == dialog_alogin){ if(!response) return Kick(playerid); if(strlen(inputtext) &lt; 6) return ShowPlayerDialog(playerid, dialog_alogin, DIALOG_STYLE_PASSWORD, "Àäìèí àâòîðèçàöèÿ:", "Òàê êàê òû ÿâëÿåøñÿ àäìèíèñòðàòîðîì","Îê", "Îòìåíà"); if(strcmp(inputtext, AdminInfo[playerid][aPassword]) == 0){ format(msg,max_line,"&lt;ALogin> âîøåë %s[%d]",GetName(playerid),playerid); AMessage(msg,clYellow); format(msg,max_line,"Âû àâòîðèçèðîâàëèñü êàê %s.",GetAdminName(playerid)); Message(playerid,msg,clYellow); SpawnPlayer(playerid); }else{ LoginAttempts[playerid]++; if(LoginAttempts[playerid] >= 3){ Message(playerid,"Âû ââåëè 3 ðàçà ïàðîëü íå ïðàâèëüíî.",clGreen); Kick(playerid);} else ShowPlayerDialog(playerid, dialog_alogin, DIALOG_STYLE_PASSWORD, "Àäìèí àâòîðèçàöèÿ:", "Ââåäèòå ïàðîëü â ïîëå íèæå:", "Îê", "Îòìåíà");} return 1;} //-- dialogid == 4 if(dialogid == dialog_aregister){ if(strlen(inputtext) &lt; 6) return ShowPlayerDialog(playerid, dialog_aregister, DIALOG_STYLE_PASSWORD,"Àäìèí ðåãèñòðàöèÿ:","Ââåäèòå ïàðîëü\n\nÏàðîëü äîëæåí ñîñòîÿòü èç ëàòèíñêèõ áóêâ è öûôð\n            ðàçìåðîì îò 6 äî 15 ñèìâîëîâ.","Îê", "Îòìåíà"); new query[512]; mysql_format(SQL, query, sizeof(query), "INSERT INTO `Admins` (`Name`, `Password`) VALUES ('%e', '%s')", GetName(playerid), inputtext); mysql_tquery(SQL, query, "OnAdminRegister", "d", playerid); return 1;} //-- dialogid == 5 if(dialogid == dialog_invite){ new f; f = PlayerInfo[Perevod[playerid]][pFaction]; if(!IsPlayerConnected(Perevod[playerid])) return Message(playerid,"Ëèäåð ïîêèíóë èãðó.",clYellow); if(response){ format(msg,max_line,"%s ïðèíÿë âàñ â ñâîþ ôðàêöèþ (%s)",GetName(Perevod[playerid]),FactionNames[f]); Message(playerid,msg,clYellow); format(msg,max_line,"Bû ïðèíÿëè %s â ñâîþ ôðàêöèþ (%s)",GetName(playerid),FactionNames[f]); Message(Perevod[playerid],msg,clYellow); SetPlayerFaction(playerid,PlayerInfo[Perevod[playerid]][pFaction],1); SetPlayerFactionColor(playerid,PlayerInfo[Perevod[playerid]][pFaction]); SaveAccount(playerid); Perevod[playerid] = -1; }else{ format(msg,max_line,"%s îòêàçàëñÿ îò âñòóïëåíèÿ âî ôðàêöèþ.",GetName(playerid)); Message(Perevod[playerid],msg,clDarkRed); format(msg,max_line,"Âû îòêàçàëèñü îò âñòóïëåíèÿ âî ôðàêöèþ."); Message(playerid,msg,clDarkRed); Perevod[playerid] = -1;} return 1;} //== return 1;}// Êîíåö OnDialogResponse(playerid, dialogid, response, listitem, inputtext[]) //=============================OnPlayerClickPlayer============================// public OnPlayerClickPlayer(playerid, clickedplayerid, source) { 	return 1; } //==========================OnPlayerClickTextDraw=============================// public OnPlayerClickTextDraw(playerid, Text:clickedid){  if(clickedid == Text:TextDrawInvSkin[playerid]){ if(SelectItem[playerid] > 0){ UseItem(playerid,SelectItem[playerid]); HideItemList(playerid); ShowItemList(playerid); SelectItem[playerid] = 0;} PlayerPlaySound(playerid, 1084, 0.0, 0.0, 0.0); return 1;} //-- if(clickedid == Text:INVALID_TEXT_DRAW){ HideItemList(playerid); TextDrawHideForPlayer(playerid, TextDrawInvFon); TextDrawHideForPlayer(playerid, TextDrawInvMenu); TextDrawHideForPlayer(playerid, TextDrawInvPocket); TextDrawHideForPlayer(playerid, TextDrawInvPack); TextDrawHideForPlayer(playerid, TextDrawInvCar); TextDrawHideForPlayer(playerid, TextDrawInvShop); PlayerTextDrawHide(playerid, TextDrawInvLicenses[playerid]); PlayerTextDrawHide(playerid, TextDrawInvFraction[playerid]); PlayerTextDrawHide(playerid, TextDrawInvSkin[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems2[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems3[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems4[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems5[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems6[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems7[playerid]); PlayerTextDrawHide(playerid, TextDrawInvItems8[playerid]);} return 0;}   public OnPlayerClickPlayerTextDraw(playerid, PlayerText:playertextid){      for(new s=1;s&lt;11;s++){     if(playertextid == PlayerText:Graphinv9[playerid][s]){     new str[128];     SelectItem[playerid] = GraphItemList[s][playerid]; 	format(str, 128, "* Âû âûáðàëè %s", InvNames[SelectItem[playerid]]); 	SendClientMessage(playerid, clGrad, str);     PlayerPlaySound(playerid, 1084, 0.0, 0.0, 0.0);     return 1;}}      return 0;}      //=============================HUDTimerUpdate=================================// public HUDTimerUpdate(playerid){                                              // Îáíîâëÿåì âñå HUD òàéìåðû (êàæäóþ ñåêóíäó) if(!IsPlayerConnected(playerid)) return 1; if(IsPlayerNPC(playerid)) return 1; //==// Timers if(ReportDelay[playerid]) ReportDelay[playerid]--;                            // Âðåìÿ äî íîâîãî ðåïîðòà. return 1;}// The End public HUDTimerUpdate //=============================GetName========================================// GetName(playerid){ new pname[max_name]; GetPlayerName(playerid,pname,max_name); return pname;} //==============================Message=======================================// Message(playerid,msg[],color = clWhite){ if(!IsPlayerConnected(playerid)) return 0; new n = strlen(msg), rmsg[140]; rmsg = " "; for(new i=0; i&lt;120 &amp;&amp; i&lt;n; i++) rmsg[i+1] = msg[i]; SendClientMessage(playerid,color,rmsg); if(n > 120) { strdel(msg,0,120); Message(playerid,msg,color);} return 1;} //=============================iscmd==========================================// iscmd(s[],cmd[]) { return !strcmp(s,cmd,true);} //=============================Strtok=========================================// strtok(const line[], &amp;idx, div=' '){ new n = strlen(line), start = idx, r[max_line]; while(idx&lt;n &amp;&amp; (line[idx]==div || line[idx]==0x09)) idx++; while(idx&lt;n &amp;&amp; line[idx]!=div &amp;&amp; line[idx]!=0x09 &amp;&amp; idx-start&lt;=sizeof(r)){ r[idx-start] = line[idx]; idx++;} r[idx-start] = EOS; while(idx&lt;n &amp;&amp; (line[idx]==div || line[idx]==0x09)) idx++; return r;} //=============================scopy==========================================// scopy(dst[],src[]){ if(src[strlen(src)-1]=='\n') strmid(dst,src,0,strlen(src)-1,max_line); else strmid(dst,src,0,strlen(src),max_line); return 1;} //=======================GivePlayerCash=======================================// GivePlayerCash(playerid,amount){ new msg[max_line]; PlayerInfo[playerid][pMoney] += amount; GivePlayerMoney(playerid,amount); format(msg,max_line,"~g~+$%d",amount); TextDrawSetString(TextDrawCash[playerid],msg); TextDrawShowForPlayer(playerid,TextDrawCash[playerid]); KillTimer(TimerHideCash[playerid]); TimerHideCash[playerid] = SetTimerEx("HideCash",3000,0,"%i",playerid); return 1;} //=======================UnGivePlayerCash=====================================// UnGivePlayerCash(playerid,cash){ new msg[max_line]; PlayerInfo[playerid][pMoney] -= cash; GivePlayerMoney(playerid,-cash); format(msg,max_line,"~r~-$%d",cash); TextDrawSetString(TextDrawCash[playerid],msg); TextDrawShowForPlayer(playerid,TextDrawCash[playerid]); KillTimer(TimerHideCash[playerid]); TimerHideCash[playerid] = SetTimerEx("HideCash",3000,0,"%i",playerid); return 1;} //============================================================================// ShowPlayerTextDraw(playerid){ //-- Money --// TextDrawCash[playerid] = TextDrawCreate(608.000000, 98.000000, "-1"); TextDrawAlignment(TextDrawCash[playerid], 3); TextDrawBackgroundColor(TextDrawCash[playerid], 255); TextDrawFont(TextDrawCash[playerid], 3); TextDrawLetterSize(TextDrawCash[playerid], 0.589999, 2.399999); TextDrawColor(TextDrawCash[playerid], -16776961); TextDrawSetOutline(TextDrawCash[playerid], 1); TextDrawSetProportional(TextDrawCash[playerid], 1); //-- inv --// TextDrawInvLicenses[playerid] = CreatePlayerTextDraw(playerid,260.000000, 120.000000, "Driver licenzes: A B C D E F"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvLicenses[playerid], 255); PlayerTextDrawFont(playerid,TextDrawInvLicenses[playerid], 1); PlayerTextDrawLetterSize(playerid,TextDrawInvLicenses[playerid], 0.200000, 0.799999); PlayerTextDrawColor(playerid,TextDrawInvLicenses[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvLicenses[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvLicenses[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvLicenses[playerid], 1); PlayerTextDrawSetSelectable(playerid,TextDrawInvLicenses[playerid], 0); //-- Show Fraction TextDrawInvFraction[playerid] = CreatePlayerTextDraw(playerid,260.000000, 127.000000, "Fraction: None"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvFraction[playerid], 255); PlayerTextDrawFont(playerid,TextDrawInvFraction[playerid], 1); PlayerTextDrawLetterSize(playerid,TextDrawInvFraction[playerid], 0.200000, 0.799999); PlayerTextDrawColor(playerid,TextDrawInvFraction[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvFraction[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvFraction[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvFraction[playerid], 1); PlayerTextDrawSetSelectable(playerid,TextDrawInvFraction[playerid], 0); //-- TextDrawInvSkin[playerid] = CreatePlayerTextDraw(playerid, 209.000000, 119.000000, "playerskin"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvSkin[playerid], 0); PlayerTextDrawFont(playerid,TextDrawInvSkin[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvSkin[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvSkin[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvSkin[playerid], 1); PlayerTextDrawSetProportional(playerid,TextDrawInvSkin[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvSkin[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvSkin[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvSkin[playerid], 70.000000, 70.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvSkin[playerid], 1); //-- TextDrawInvItems[playerid] = CreatePlayerTextDraw(playerid,230.000000, 186.000000, "useditems"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems[playerid], 1); //-- TextDrawInvItems2[playerid] = CreatePlayerTextDraw(playerid,262.000000, 186.000000, "useditems2"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems2[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems2[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems2[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems2[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems2[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems2[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems2[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems2[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems2[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems2[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems2[playerid], 1); //-- TextDrawInvItems3[playerid] = CreatePlayerTextDraw(playerid,294.000000, 186.000000, "useditems3"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems3[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems3[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems3[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems3[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems3[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems3[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems3[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems3[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems3[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems3[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems3[playerid], 1); //-- TextDrawInvItems4[playerid] = CreatePlayerTextDraw(playerid,326.000000, 186.000000, "useditems4"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems4[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems4[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems4[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems4[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems4[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems4[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems4[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems4[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems4[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems4[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems4[playerid], 1); //-- TextDrawInvItems5[playerid] = CreatePlayerTextDraw(playerid,358.000000, 186.000000, "useditems5"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems5[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems5[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems5[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems5[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems5[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems5[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems5[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems5[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems5[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems5[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems5[playerid], 1); //-- TextDrawInvItems6[playerid] = CreatePlayerTextDraw(playerid,358.000000, 164.000000, "useditems6"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems6[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems6[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems6[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems6[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems6[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems6[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems6[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems6[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems6[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems6[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems6[playerid], 1); //-- TextDrawInvItems7[playerid] = CreatePlayerTextDraw(playerid,358.000000, 142.000000, "useditems7"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems7[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems7[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems7[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems7[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems7[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems7[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems7[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems7[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems7[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems7[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems7[playerid], 1); //-- TextDrawInvItems8[playerid] = CreatePlayerTextDraw(playerid,358.000000, 120.000000, "useditems8"); PlayerTextDrawBackgroundColor(playerid,TextDrawInvItems8[playerid], 80); PlayerTextDrawFont(playerid,TextDrawInvItems8[playerid], 5); PlayerTextDrawLetterSize(playerid,TextDrawInvItems8[playerid], 0.500000, 1.000000); PlayerTextDrawColor(playerid,TextDrawInvItems8[playerid], -1); PlayerTextDrawSetOutline(playerid,TextDrawInvItems8[playerid], 0); PlayerTextDrawSetProportional(playerid,TextDrawInvItems8[playerid], 1); PlayerTextDrawSetShadow(playerid,TextDrawInvItems8[playerid], 1); PlayerTextDrawUseBox(playerid,TextDrawInvItems8[playerid], 1); PlayerTextDrawBoxColor(playerid,TextDrawInvItems8[playerid], 0); PlayerTextDrawTextSize(playerid,TextDrawInvItems8[playerid], 30.000000, 20.000000); PlayerTextDrawSetSelectable(playerid,TextDrawInvItems8[playerid], 1); return 1;} //==============================tpLoad========================================// public tpLoad(){ if(cache_num_rows() > 0){ new rowscount; rowscount = cache_num_rows(); for(new tpCount;tpCount&lt;rowscount;tpCount++){ TeleportInfo[tpCount][tpID] = cache_get_field_content_int(tpCount, "ID", SQL); TeleportInfo[tpCount][tpFaction] = cache_get_field_content_int(tpCount, "Faction", SQL); TeleportInfo[tpCount][tpIntr]    = cache_get_field_content_int(tpCount, "Intr", SQL); TeleportInfo[tpCount][tpSPos][0] = cache_get_field_content_float(tpCount, "SPosX", SQL); TeleportInfo[tpCount][tpSPos][1] = cache_get_field_content_float(tpCount, "SPosY", SQL); TeleportInfo[tpCount][tpSPos][2] = cache_get_field_content_float(tpCount, "SPosZ", SQL); TeleportInfo[tpCount][tpDPos][0] = cache_get_field_content_float(tpCount, "DPosX", SQL); TeleportInfo[tpCount][tpDPos][1] = cache_get_field_content_float(tpCount, "DPosY", SQL); TeleportInfo[tpCount][tpDPos][2] = cache_get_field_content_float(tpCount, "DPosZ", SQL); TeleportInfo[tpCount][tpDPos][3] = cache_get_field_content_float(tpCount, "DPosA", SQL); tpCreate(TeleportInfo[tpCount][tpFaction], TeleportInfo[tpCount][tpIntr], TeleportInfo[tpCount][tpSPos][0], TeleportInfo[tpCount][tpSPos][1], TeleportInfo[tpCount][tpSPos][2], TeleportInfo[tpCount][tpDPos][0], TeleportInfo[tpCount][tpDPos][1], TeleportInfo[tpCount][tpDPos][2], TeleportInfo[tpCount][tpDPos][3], TeleportInfo[tpCount][tpID]);}} return 1;} //==============================tpSave========================================// stock tpSave(tpid){ new query[1024]; mysql_format(SQL, query, sizeof(query),"UPDATE `Teleports` SET \ `Intr`    = '%d', \ `Faction` = '%d', \ `SPosX`   = '%f', \ `SPosY`   = '%f', \ `SPosZ`   = '%f', \ `DPosX`   = '%f', \ `DPosY`   = '%f', \ `DPosZ`   = '%f', \ `DPosA`   = '%f'  \ WHERE `ID` = '%d'", TeleportInfo[tpid][tpIntr], TeleportInfo[tpid][tpFaction], TeleportInfo[tpid][tpSPos][0], TeleportInfo[tpid][tpSPos][1], TeleportInfo[tpid][tpSPos][2], TeleportInfo[tpid][tpDPos][0], TeleportInfo[tpid][tpDPos][1], TeleportInfo[tpid][tpDPos][2], TeleportInfo[tpid][tpDPos][3], TeleportInfo[tpid][tpID]); mysql_tquery(SQL, query, "", ""); return 1;} //==============================tpCreate======================================// stock tpCreate(Faction, Intr, Float: SPosX, Float: SPosY, Float: SPosZ, &amp;Float: DPosX = 0.0, &amp;Float: DPosY = 0.0, &amp;Float: DPosZ = 0.0, &amp;Float: DPosA = 0.0, &amp;sqlid = 0){ new f; for(new a = 0; a &lt; max_tps; a++){ if(TeleportInfo[a][tpSPos][0] == 0.0){ f = a; break;}} TeleportInfo[f][tpIntr]    = Intr; TeleportInfo[f][tpFaction] = Faction; TeleportInfo[f][tpSPos][0] = SPosX; TeleportInfo[f][tpSPos][1] = SPosY; TeleportInfo[f][tpSPos][2] = SPosZ; TeleportInfo[f][tpDPos][0] = DPosX; TeleportInfo[f][tpDPos][1] = DPosY; TeleportInfo[f][tpDPos][2] = DPosZ; TeleportInfo[f][tpDPos][3] = DPosA; TeleportInfo[f][tpPickupid]  = CreatePickup(1318, 23, SPosX, SPosY, SPosZ); printf("CreateTeleports: %f %f %f",SPosX,SPosY,SPosZ); if(sqlid == 0){ new query[128]; mysql_format(SQL, query, sizeof(query), "INSERT INTO `Teleports` (`SPosX`, `SPosY`, `SPosZ`) VALUES ('%f', '%f', '%f')", SPosX, SPosY, SPosZ); mysql_tquery(SQL, query, "OnTeleportCreate","i",f);} return 1;} //==============================tpSetDPos======================================// stock tpSetDPos(i,playerid){ GetPlayerPos(playerid,TeleportInfo[i][tpDPos][0],TeleportInfo[i][tpDPos][1],TeleportInfo[i][tpDPos][2]); GetPlayerFacingAngle(playerid,TeleportInfo[i][tpDPos][3]); TeleportInfo[i][tpIntr] = GetPlayerInterior(playerid); Message(playerid,"Òî÷êà íàçíà÷åíèÿ ñîõðàíåíà."); tpSave(i); return 1;} //==============================tpDel=========================================// stock DestroyTeleport(tpid){ new query[128]; TeleportInfo[tpid][tpSPos][0] = 0.0; TeleportInfo[tpid][tpSPos][1] = 0.0; TeleportInfo[tpid][tpSPos][2] = 0.0; DestroyPickup(TeleportInfo[tpid][tpPickupid]); if(TeleportInfo[tpid][tpID] > 0){ mysql_format(SQL, query, sizeof(query), "DELETE FROM `Teleports` WHERE `ID` = '%d'", TeleportInfo[tpid][tpID]); mysql_tquery(SQL, query, "", "");} return 1;} //============================================================================// stock DestroyHouse(id){ new query[128]; HouseInfo[id][hEPosX] = 0.0; HouseInfo[id][hEPosY] = 0.0; HouseInfo[id][hEPosZ] = 0.0; HouseInfo[id][hEPosR] = 0.0; DestroyPickup(HouseInfo[id][hPickupID]); if(HouseInfo[id][hID] > 0){ mysql_format(SQL, query, sizeof(query), "DELETE FROM `Props` WHERE `ID` = '%d'", HouseInfo[id][hID]); mysql_tquery(SQL, query, "", "");} return 1;} //============================================================================// stock DestroyVehicles(id){ new query[128]; DestroyVehicle(VehicleInfo[id][vPickupID]); if(VehicleInfo[id][vID] > 0){ mysql_format(SQL, query, sizeof(query), "DELETE FROM `Vehicles` WHERE `ID` = '%d'", VehicleInfo[id][vID]); mysql_tquery(SQL, query, "", "");} return 1;} //============================================================================// stock GetNearestTP(playerid, Float: maxd = 4.0){ for(new i=0; i&lt;max_tps; i++){ if(IsPlayerInRangeOfPoint(playerid,maxd,TeleportInfo[i][tpSPos][0],TeleportInfo[i][tpSPos][1],TeleportInfo[i][tpSPos][2])) return i;} return -1;} //============================================================================// GetNearestHouses(playerid, Float:maxd = 2.0){ for(new i=0; i&lt;max_houses; i++){ if(IsPlayerInRangeOfPoint(playerid,maxd,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ])) return i;} return -1;} //============================================================================// stock GetNearestBiznes(playerid, Float: maxd = 4.0){ for(new i=0; i&lt;max_biznes; i++){ if(IsPlayerInRangeOfPoint(playerid,maxd,BiznesInfo[i][bSPos][0],BiznesInfo[i][bSPos][1],BiznesInfo[i][bSPos][2])) return i;} return -1;} //============================================================================// stock GetPlayerNearVehicle(playerid, Float:dist){ new Float:localPos[3]; for(new v=0;v&lt;max_vehicles;v++){ GetVehiclePos(v, localPos[0], localPos[1], localPos[2]); if(IsPlayerInRangeOfPoint(playerid, dist, localPos[0], localPos[1], localPos[2])) return v;} return INVALID_VEHICLE_ID;} //============================================================================// stock PropCreate(Intr, Open, Pint, Float: SPosX, Float: SPosY, Float: SPosZ, Float: SPosA, &amp;Float: DPosX = 0.0, &amp;Float: DPosY = 0.0, &amp;Float: DPosZ = 0.0, &amp;Float: DPosA = 0.0, &amp;sqlid = 0){ new propid; for(new a = 0; a &lt; max_houses; a++){ if(HouseInfo[a][hPosX] == 0.0){ propid = a; break;}} hOwner[propid]            = "no-one"; HouseInfo[propid][hIntr]  = Intr; HouseInfo[propid][hOpen]  = Open; HouseInfo[propid][hPrice] = Pint; HouseInfo[propid][hPosX]  = SPosX; HouseInfo[propid][hPosY]  = SPosY; HouseInfo[propid][hPosZ]  = SPosZ; HouseInfo[propid][hPosR]  = SPosA; HouseInfo[propid][hEPosX] = DPosX; HouseInfo[propid][hEPosY] = DPosY; HouseInfo[propid][hEPosZ] = DPosZ; HouseInfo[propid][hEPosR] = DPosA; new houseid; if(HouseInfo[propid][hPrice] > 0) houseid = 1273; else houseid = 1272; HouseInfo[propid][hPickupID] = CreatePickup(houseid,23,SPosX,SPosY,SPosZ); printf("CreateProps: %f %f %f", SPosX, SPosY, SPosZ); if(sqlid == 0){ new query[512]; mysql_format(SQL, query, sizeof(query), "INSERT INTO `Props` (`Open`,`Price`,`SPosX`,`SPosY`,`SPosZ`,`SPosA`) VALUES ('%d', '%d', '%f', '%f', '%f', '%f')", Open, Pint,SPosX, SPosY, SPosZ, SPosA); mysql_tquery(SQL, query, "OnHouseCreate","i",propid);} return 1;} //============================================================================// stock SaveProp(tpid){ new query[1024]; mysql_format(SQL, query, sizeof(query),"UPDATE `Props` SET \ `Owner`   = '%s', \ `Intr`    = '%d', \ `Open`    = '%d', \ `Price`   = '%d', \ `SPosX`   = '%f', \ `SPosY`   = '%f', \ `SPosZ`   = '%f', \ `SPosA`   = '%f', \ `DPosX`   = '%f', \ `DPosY`   = '%f', \ `DPosZ`   = '%f', \ `DPosA`   = '%f'  \ WHERE `ID` = '%d'", hOwner[tpid], HouseInfo[tpid][hIntr], HouseInfo[tpid][hOpen], HouseInfo[tpid][hPrice], HouseInfo[tpid][hPosX], HouseInfo[tpid][hPosY], HouseInfo[tpid][hPosZ], HouseInfo[tpid][hPosR], HouseInfo[tpid][hEPosX], HouseInfo[tpid][hEPosY], HouseInfo[tpid][hEPosZ], HouseInfo[tpid][hEPosR], HouseInfo[tpid][hID]); mysql_tquery(SQL, query, "", ""); return 1;} //============================================================================// public LoadProp(){ if(cache_num_rows() > 0){ new rowscount; rowscount = cache_num_rows(); for(new propid; propid&lt;rowscount;propid++){ HouseInfo[propid][hID] = cache_get_field_content_int(propid, "ID", SQL); cache_get_field_content(0, "Owner", hOwner[propid], SQL, 129); HouseInfo[propid][hIntr]  = cache_get_field_content_int(propid, "Intr", SQL); HouseInfo[propid][hOpen]  = cache_get_field_content_int(propid, "Open", SQL); HouseInfo[propid][hPrice] = cache_get_field_content_int(propid, "Price", SQL); HouseInfo[propid][hPosX]  = cache_get_field_content_float(propid, "SPosX", SQL); HouseInfo[propid][hPosY]  = cache_get_field_content_float(propid, "SPosY", SQL); HouseInfo[propid][hPosZ]  = cache_get_field_content_float(propid, "SPosZ", SQL); HouseInfo[propid][hPosR]  = cache_get_field_content_float(propid, "SPosA", SQL); HouseInfo[propid][hEPosX] = cache_get_field_content_float(propid, "DPosX", SQL); HouseInfo[propid][hEPosY] = cache_get_field_content_float(propid, "DPosY", SQL); HouseInfo[propid][hEPosZ] = cache_get_field_content_float(propid, "DPosZ", SQL); HouseInfo[propid][hEPosR] = cache_get_field_content_float(propid, "DPosA", SQL); //-- PropCreate(HouseInfo[propid][hIntr], HouseInfo[propid][hOpen], HouseInfo[propid][hPrice], HouseInfo[propid][hPosX], HouseInfo[propid][hPosY], HouseInfo[propid][hPosZ], HouseInfo[propid][hPosR], HouseInfo[propid][hEPosX], HouseInfo[propid][hEPosY], HouseInfo[propid][hEPosZ], HouseInfo[propid][hEPosR], HouseInfo[propid][hID]);}} return 1;} //============================================================================// stock BizCreate(Intr, Open, Pint, Float: SPosX, Float: SPosY, Float: SPosZ, Float: SPosA, &amp;Float: DPosX = 0.0, &amp;Float: DPosY = 0.0, &amp;Float: DPosZ = 0.0, &amp;Float: DPosA = 0.0, &amp;sqlid = 0){ new bizid; for(new a = 0; a &lt; max_biznes; a++){ if(BiznesInfo[a][bSPos][0] == 0.0){ bizid = a; break;}} bOwner[bizid]               = "no-one"; BiznesInfo[bizid][bIntr]    = Intr; BiznesInfo[bizid][bOpen]    = Open; BiznesInfo[bizid][bPrice]   = Pint; BiznesInfo[bizid][bSPos][0] = SPosX; BiznesInfo[bizid][bSPos][1] = SPosY; BiznesInfo[bizid][bSPos][2] = SPosZ; BiznesInfo[bizid][bSPos][3] = SPosA; BiznesInfo[bizid][bDPos][0] = DPosX; BiznesInfo[bizid][bDPos][1] = DPosY; BiznesInfo[bizid][bDPos][2] = DPosZ; BiznesInfo[bizid][bDPos][3] = DPosA; //-- Biznes --// BiznesInfo[bizid][bPickupID] = CreatePickup(1274,23,SPosX,SPosY,SPosZ); printf("CreateBiznes: %f %f %f", SPosX, SPosY, SPosZ); if(sqlid == 0){ new query[512]; mysql_format(SQL, query, sizeof(query), "INSERT INTO `Biznes` (`Open`,`Price`,`SPosX`,`SPosY`,`SPosZ`,`SPosA`) VALUES ('%d', '%d', '%f', '%f', '%f', '%f')", Open, Pint,SPosX, SPosY, SPosZ, SPosA); mysql_tquery(SQL, query, "OnBiznesCreate","i",bizid);} return 1;} //============================================================================// stock SaveBiz(bizid){ new query[1024]; mysql_format(SQL, query, sizeof(query),"UPDATE `Biznes` SET \ `Owner`   = '%s', \ `Open`    = '%d', \ `Intr`    = '%d', \ `Price`   = '%d', \ `SPosX`   = '%f', \ `SPosY`   = '%f', \ `SPosZ`   = '%f', \ `SPosA`   = '%f', \ `DPosX`   = '%f', \ `DPosY`   = '%f', \ `DPosZ`   = '%f', \ `DPosA`   = '%f'  \ WHERE `ID` = '%d'", bOwner[bizid], BiznesInfo[bizid][bOpen], BiznesInfo[bizid][bIntr], BiznesInfo[bizid][bPrice], BiznesInfo[bizid][bSPos][0], BiznesInfo[bizid][bSPos][1], BiznesInfo[bizid][bSPos][2], BiznesInfo[bizid][bSPos][3], BiznesInfo[bizid][bDPos][0], BiznesInfo[bizid][bDPos][1], BiznesInfo[bizid][bDPos][2], BiznesInfo[bizid][bDPos][3], BiznesInfo[bizid][bID]); mysql_tquery(SQL, query, "", ""); return 1;} //============================================================================// public LoadBiz(){ if(cache_num_rows() > 0){ new rowscount; rowscount = cache_num_rows(); for(new bizid;bizid&lt;rowscount;bizid++){ BiznesInfo[bizid][bID] = cache_get_field_content_int(bizid, "ID", SQL); cache_get_field_content(0, "Owner", bOwner[bizid], SQL, 129); BiznesInfo[bizid][bOpen]    = cache_get_field_content_int(bizid, "Open", SQL); BiznesInfo[bizid][bIntr]    = cache_get_field_content_int(bizid, "Intr", SQL); BiznesInfo[bizid][bPrice]   = cache_get_field_content_int(bizid, "Price", SQL); BiznesInfo[bizid][bSPos][0] = cache_get_field_content_float(bizid, "SPosX", SQL); BiznesInfo[bizid][bSPos][1] = cache_get_field_content_float(bizid, "SPosY", SQL); BiznesInfo[bizid][bSPos][2] = cache_get_field_content_float(bizid, "SPosZ", SQL); BiznesInfo[bizid][bSPos][3] = cache_get_field_content_float(bizid, "SPosA", SQL); BiznesInfo[bizid][bDPos][0] = cache_get_field_content_float(bizid, "DPosX", SQL); BiznesInfo[bizid][bDPos][1] = cache_get_field_content_float(bizid, "DPosY", SQL); BiznesInfo[bizid][bDPos][2] = cache_get_field_content_float(bizid, "DPosZ", SQL); BiznesInfo[bizid][bDPos][3] = cache_get_field_content_float(bizid, "DPosA", SQL); //-- BizCreate(BiznesInfo[bizid][bIntr], BiznesInfo[bizid][bOpen], BiznesInfo[bizid][bPrice], BiznesInfo[bizid][bSPos][0], BiznesInfo[bizid][bSPos][1], BiznesInfo[bizid][bSPos][2], BiznesInfo[bizid][bSPos][3], BiznesInfo[bizid][bDPos][0], BiznesInfo[bizid][bDPos][1], BiznesInfo[bizid][bDPos][2], BiznesInfo[bizid][bDPos][3], BiznesInfo[bizid][bID]);}} return 1;} //==============================LoadVehicles==================================// public LoadVehicles(){ if(cache_num_rows() > 0){ new rowscount; rowscount = cache_num_rows(); for(new vehicleid; vehicleid&lt;rowscount; vehicleid++){ VehicleInfo[vehicleid][vID]     = cache_get_field_content_int(vehicleid, "ID", SQL); VehicleInfo[vehicleid][vModel]  = cache_get_field_content_int(vehicleid, "Model", SQL); VehicleInfo[vehicleid][vColor1] = cache_get_field_content_int(vehicleid, "Color1", SQL); VehicleInfo[vehicleid][vColor2] = cache_get_field_content_int(vehicleid, "Color2", SQL); VehicleInfo[vehicleid][vHealth] = cache_get_field_content_float(vehicleid, "Health", SQL); VehicleInfo[vehicleid][vPos][0] = cache_get_field_content_float(vehicleid, "PosX", SQL); VehicleInfo[vehicleid][vPos][1] = cache_get_field_content_float(vehicleid, "PosY", SQL); VehicleInfo[vehicleid][vPos][2] = cache_get_field_content_float(vehicleid, "PosZ", SQL); VehicleInfo[vehicleid][vPos][3] = cache_get_field_content_float(vehicleid, "PosA", SQL); SetVehicleHealth(vehicleid, VehicleInfo[vehicleid][vHealth]); CreateVehicles(-1, VehicleInfo[vehicleid][vModel], VehicleInfo[vehicleid][vColor1], VehicleInfo[vehicleid][vColor2], VehicleInfo[vehicleid][vPos][0], VehicleInfo[vehicleid][vPos][1], VehicleInfo[vehicleid][vPos][2], VehicleInfo[vehicleid][vPos][3], VehicleInfo[vehicleid][vID]);}} return 1;} //===============================CreateVehicles===============================// stock CreateVehicles(playerid = -1, Model, Color1, Color2, Float: PosX, Float: PosY, Float: PosZ, Float: PosA, &amp;sqlid = 0){ new vehicleid, msg[max_line]; for(new a = 0; a &lt; max_vehicles; a++){ if(VehicleInfo[a][vPos][0] == 0.0){ vehicleid = a; break;}} VehicleInfo[vehicleid][vModel]  = Model; VehicleInfo[vehicleid][vColor1] = Color1; VehicleInfo[vehicleid][vColor2] = Color2; VehicleInfo[vehicleid][vPos]    = PosX; VehicleInfo[vehicleid][vPos]    = PosY; VehicleInfo[vehicleid][vPos]    = PosZ; VehicleInfo[vehicleid][vPos]    = PosA; VehicleInfo[vehicleid][vPickupID] = CreateVehicle(Model, PosX, PosY, PosZ, PosA, Color1, Color2, -1); SetVehicleZAngle(vehicleid, PosA); format(msg,max_line,"Cîçäàí àâòîìîáèëü %s (id: %d)",CarName[GetVehicleModel(VehicleInfo[vehicleid][vPickupID])-400],vehicleid); Message(playerid,msg,clYellow); printf("CreateVehiles: %f %f %f", PosX, PosY, PosZ); if(sqlid == 0){ new query[512]; mysql_format(SQL, query, sizeof(query), "INSERT INTO `Vehicles` (`Model`,`Color1`,`Color2`,`PosX`,`PosY`,`PosZ`,`PosA`) VALUES ('%d', '%d', '%d', '%f', '%f', '%f', '%f')", Model, Color1, Color2, PosX, PosY, PosZ, PosA); mysql_tquery(SQL, query, "OnVehicleCreate","i",vehicleid);} return 1;} //============================================================================// stock SaveVehicles(vehicleid){ GetVehicleHealth(vehicleid,VehicleInfo[vehicleid][vHealth]); GetVehiclePos(vehicleid,VehicleInfo[vehicleid][vPos][0],VehicleInfo[vehicleid][vPos][1],VehicleInfo[vehicleid][vPos][2]); GetVehicleZAngle(vehicleid, VehicleInfo[vehicleid][vPos][3]); new query[1024]; mysql_format(SQL, query, sizeof(query),"UPDATE `Vehicles` SET \ `Model`    = '%d', \ `Color1`   = '%d', \ `Color2`   = '%d', \ `Health`   = '%f', \ `PosX`     = '%f', \ `PosY`     = '%f', \ `PosZ`     = '%f', \ `PosA`     = '%f'  \ WHERE `ID` = '%d'", VehicleInfo[vehicleid][vModel], VehicleInfo[vehicleid][vColor1], VehicleInfo[vehicleid][vColor2], VehicleInfo[vehicleid][vHealth], VehicleInfo[vehicleid][vPos][0], VehicleInfo[vehicleid][vPos][1], VehicleInfo[vehicleid][vPos][2], VehicleInfo[vehicleid][vPos][3], VehicleInfo[vehicleid][vID]); mysql_tquery(SQL, query, "", ""); return 1;} //============================================================================// FMessage(f,r,msg[],color=clWhite,f2=-1){ for(new i=0; i&lt;max_players; i++) if(IsPlayerConnected(i)){ if((PlayerInfo[i][pFaction]==f || PlayerInfo[i][pFaction]==f2) &amp;&amp; PlayerInfo[i][pRank] >=r) Message(i,msg,color);}} //=============================AMessage=======================================// AMessage(msg[],color=clWhite,lvl=1){ for(new i=0; i&lt;max_players; i++) if(IsPlayerConnected(i)) if(AdminInfo[i][aAdmin]>=lvl) Message(i,msg,color);} //============================================================================// GetVehicleName(vid){ return CarName[GetVehicleModel(vid)-400];} //============================================================================// stock GetDistancePP(playerid, playerid2){ new Float:x1,Float:y1,Float:z1,Float:x2,Float:y2,Float:z2; new Float:tmpdis; GetPlayerPos(playerid,x1,y1,z1); GetPlayerPos(playerid2,x2,y2,z2); tmpdis = floatsqroot(floatpower(floatabs(floatsub(x2,x1)),2)+floatpower(floatabs(floatsub(y2,y1)),2)+floatpower(floatabs(floatsub(z2,z1)),2)); return floatround(tmpdis);} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// GetPropIconID(i){ new id; if(HouseInfo[i][hPrice]) id = 31; else id = 32; return id;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// SetIcons(playerid){ new j = 1; for(new i=0; i&lt;max_houses; i++) if(HouseInfo[i][hPosX]!=0.0){ if(IsPlayerInRangeOfPoint(playerid,200.0,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ])){ SetPlayerMapIcon(playerid,j,HouseInfo[i][hPosX],HouseInfo[i][hPosY],HouseInfo[i][hPosZ],GetPropIconID(i),1); PropIcon[i][playerid] = j; j++; } else if(PropIcon[i][playerid]) { RemovePlayerMapIcon(playerid,PropIcon[i][playerid]); PropIcon[i][playerid] = 0;}} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock CreateItemList(playerid){ new Float:BaseX = 198.0,     Float:BaseY = 221.0,     ItemCount, InvCount; for(new slot=0; slot&lt;11; slot++){ //Graphinv9[playerid][slot] = PlayerText:INVALID_TEXT_DRAW;  InvCount ++; ItemCount ++; BaseX += 32; if(ItemCount > 5){ BaseX = 230.0; BaseY+=22; ItemCount = 1;} Graphinv9[playerid][InvCount] = CreatePlayerTextDraw(playerid, BaseX, BaseY, InvNames[slot]);//Èíâåíòàðü PlayerTextDrawBackgroundColor(playerid, Graphinv9[playerid][InvCount], 48); PlayerTextDrawFont(playerid, Graphinv9[playerid][InvCount], 5); PlayerTextDrawLetterSize(playerid, Graphinv9[playerid][InvCount], 0.500000, 1.000000); PlayerTextDrawColor(playerid, Graphinv9[playerid][InvCount], -1); PlayerTextDrawSetOutline(playerid, Graphinv9[playerid][InvCount], 0); PlayerTextDrawSetProportional(playerid, Graphinv9[playerid][InvCount], 1); PlayerTextDrawSetShadow(playerid, Graphinv9[playerid][InvCount], 1); PlayerTextDrawUseBox(playerid, Graphinv9[playerid][InvCount], 1); PlayerTextDrawBoxColor(playerid, Graphinv9[playerid][InvCount], 48); PlayerTextDrawTextSize(playerid, Graphinv9[playerid][InvCount], 30.000000, 20.000000); PlayerTextDrawSetPreviewRot(playerid, Graphinv9[playerid][InvCount],0.0,0.0,45.0); PlayerTextDrawSetSelectable(playerid, Graphinv9[playerid][InvCount], 1);} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock DestroyItemList(playerid){ for(new s=0; s&lt;11; s++){ PlayerTextDrawHide(playerid, Graphinv9[playerid][s]); PlayerTextDrawDestroy(playerid, Graphinv9[playerid][s]);} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock ShowVicinityItemList(playerid){ new f, InvCount; if(!IsPlayerInAnyVehicle(playerid)){ for(new a = 0; a &lt; max_obj; a++){ if(IsPlayerInRangeOfPoint(playerid, 2.0, dInvData[a][ItemPos][0], dInvData[a][ItemPos][1], dInvData[a][ItemPos][2])){ f = a; if(dInvData[f][ItemID] > 0){ InvCount ++; GraphItemList[InvCount][playerid] = dInvData[f][ItemID]; PlayerTextDrawSetPreviewModel(playerid, Graphinv9[playerid][InvCount],InvObjects[dInvData[f][ItemID]]); PlayerTextDrawShow(playerid, Graphinv9[playerid][InvCount]);}}} }else{ for(new slot=0; slot&lt;invnumbers; slot++){ if(VehicleInv[GetPlayerVehicleID(playerid)][slot] > 0){ for(new i; i&lt;VehicleInv[GetPlayerVehicleID(playerid)][slot]; i++){ InvCount ++; GraphItemList[InvCount][playerid] = slot; PlayerTextDrawSetPreviewModel(playerid, Graphinv9[playerid][InvCount],InvObjects[slot]); PlayerTextDrawShow(playerid, Graphinv9[playerid][InvCount]);}}}} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock HideItemList(playerid){ for(new s=0; s&lt;11; s++){ PlayerTextDrawHide(playerid, Graphinv9[playerid][s]);} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock ShowItemList(playerid){ new InvCount, str[128];  for(new slot=1; slot&lt;invnumbers; slot++){ if(PlayerInv[playerid][slot] > 0){ for(new i; i&lt;PlayerInv[playerid][slot]; i++){  InvCount ++;  GraphItemList[InvCount][playerid] = slot;  PlayerTextDrawSetPreviewModel(playerid, Graphinv9[playerid][InvCount],InvObjects[slot]); PlayerTextDrawShow(playerid, Graphinv9[playerid][InvCount]); format(str,sizeof(str),"%d",InvCount); Message(playerid,str,clGreen);}}}  SelectTextDraw(playerid, 0xACCBF1FF); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock UseItem(playerid,itemid){  if(itemid == 1){// Ìèãàëêà new msg[max_line]; if(PlayerInfo[playerid][pFaction] == 1){ Message(playerid,"Ýòó êîìàíäó ìîãóò èñïîëüçîâàòü ïîëèöåéñêèå.",clDarkRed); return 1;} new vid = GetPlayerVehicleID(playerid); if(!vid){ Message(playerid,"Âû äîëæíû áûòü â ìàøèíå!",clDarkRed); return 1;} new carmodel = GetVehicleModel(vid); if(carmodel == 481 || carmodel == 509 || carmodel == 510 || carmodel == 462 || carmodel == 448){ Message(playerid,"Íà ýòîò òðàíñïîðò íåëüçÿ ñòàâèòü ìèãàëêó",clDarkRed); return 1;} new vmodel = GetVehicleModel(vid); if(Flasher[playerid] == 0){ FlasherObj[vid] = CreateObject(18646,0,0,0,0,0,0); if(vmodel == 411) AttachObjectToVehicle(FlasherObj[vid],vid,0.3,-0.1,0.75,0.0,0.0,0.0); else if(vmodel == 415) AttachObjectToVehicle(FlasherObj[vid],vid,0.3,-0.1,0.65,0.0,0.0,0.0); else if(vmodel == 444) AttachObjectToVehicle(FlasherObj[vid],vid,0.5,0.4,1.73,0.0,0.0,0.0); else if(vmodel == 451) AttachObjectToVehicle(FlasherObj[vid],vid,0.4,-0.3,0.62,0.0,0.0,0.0); else if(vmodel == 463) AttachObjectToVehicle(FlasherObj[vid],vid,0.0,0.1,0.48,0.0,0.0,0.0); else if(vmodel == 470) AttachObjectToVehicle(FlasherObj[vid],vid,0.5,-0.1,1.13,0.0,0.0,0.0); else if(vmodel == 490) AttachObjectToVehicle(FlasherObj[vid],vid,0.5,0.5,1.13,0.0,0.0,0.0); else if(vmodel == 521) AttachObjectToVehicle(FlasherObj[vid],vid,0.0,0.1,0.64,0.0,0.0,0.0); else if(vmodel == 522 || vmodel ==581 || vmodel ==461) AttachObjectToVehicle(FlasherObj[vid],vid,0.0,0.1,0.67,0.0,0.0,0.0); else if(vmodel == 525) AttachObjectToVehicle(FlasherObj[vid],vid,0.5,0.4,1.4,0.0,0.0,0.0); else if(vmodel == 541) AttachObjectToVehicle(FlasherObj[vid],vid,0.3,-0.1,0.68,0.0,0.0,0.0); else if(vmodel == 579) AttachObjectToVehicle(FlasherObj[vid],vid,0.5,-0.4,1.3,0.0,0.0,0.0); else AttachObjectToVehicle(FlasherObj[vid],vid,0.4,-0.1,0.87,0.0,0.0,0.0); Flasher[playerid] = 1; format(msg,max_line,"Ìèãàëêà âêëþ÷åíà íà %s",GetVehicleName(GetVehicleModel(vid))); Message(playerid,msg,clYellow); } else { DestroyObject(FlasherObj[vid]); Flasher[playerid] = 0; format(msg,max_line,"Ìèãàëêà âûêëþ÷åíà íà %s",GetVehicleName(GetVehicleModel(vid))); Message(playerid,msg,clYellow);} return 1;}  return 1;}// The End //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock CreateInventoryTextDraw(){ TextDrawInvFon = TextDrawCreate(230.000000, 110.000000, "FON"); TextDrawBackgroundColor(TextDrawInvFon, 0); TextDrawFont(TextDrawInvFon, 1); TextDrawLetterSize(TextDrawInvFon, 0.500000, 22.000000); TextDrawColor(TextDrawInvFon, 0); TextDrawSetOutline(TextDrawInvFon, 0); TextDrawSetProportional(TextDrawInvFon, 1); TextDrawSetShadow(TextDrawInvFon, 1); TextDrawUseBox(TextDrawInvFon, 1); TextDrawBoxColor(TextDrawInvFon, 48); TextDrawTextSize(TextDrawInvFon, 390.000000, 0.000000); TextDrawSetSelectable(TextDrawInvFon, 0); //-- TextDrawInvMenu = TextDrawCreate(230.000000, 110.000000, "Player menu"); TextDrawBackgroundColor(TextDrawInvMenu, 255); TextDrawFont(TextDrawInvMenu, 1); TextDrawLetterSize(TextDrawInvMenu, 0.200000, 0.799999); TextDrawColor(TextDrawInvMenu, -1); TextDrawSetOutline(TextDrawInvMenu, 0); TextDrawSetProportional(TextDrawInvMenu, 1); TextDrawSetShadow(TextDrawInvMenu, 0); TextDrawUseBox(TextDrawInvMenu, 1); TextDrawBoxColor(TextDrawInvMenu, 255); TextDrawTextSize(TextDrawInvMenu, 390.000000, 0.000000); TextDrawSetSelectable(TextDrawInvMenu, 0); //-- TextDrawInvPocket = TextDrawCreate(230.000000, 210.000000, "Pocket"); TextDrawBackgroundColor(TextDrawInvPocket, 255); TextDrawFont(TextDrawInvPocket, 1); TextDrawLetterSize(TextDrawInvPocket, 0.200000, 0.799999); TextDrawColor(TextDrawInvPocket, -1); TextDrawSetOutline(TextDrawInvPocket, 0); TextDrawSetProportional(TextDrawInvPocket, 1); TextDrawSetShadow(TextDrawInvPocket, 1); TextDrawUseBox(TextDrawInvPocket, 1); TextDrawBoxColor(TextDrawInvPocket, 255); TextDrawTextSize(TextDrawInvPocket, 390.000000, 0.000000); TextDrawSetSelectable(TextDrawInvPocket, 1); //-- TextDrawInvPack = TextDrawCreate(261.000000, 210.000000, "Pack"); TextDrawBackgroundColor(TextDrawInvPack, 255); TextDrawFont(TextDrawInvPack, 1); TextDrawLetterSize(TextDrawInvPack, 0.200000, 0.799999); TextDrawColor(TextDrawInvPack, -1); TextDrawSetOutline(TextDrawInvPack, 0); TextDrawSetProportional(TextDrawInvPack, 1); TextDrawSetShadow(TextDrawInvPack, 1); TextDrawUseBox(TextDrawInvPack, 1); TextDrawBoxColor(TextDrawInvPack, 255); TextDrawTextSize(TextDrawInvPack, 390.000000, 0.000000); TextDrawSetSelectable(TextDrawInvPack, 1); //-- TextDrawInvCar = TextDrawCreate(284.000000, 210.000000, "Car"); TextDrawBackgroundColor(TextDrawInvCar, 255); TextDrawFont(TextDrawInvCar, 1); TextDrawLetterSize(TextDrawInvCar, 0.200000, 0.799999); TextDrawColor(TextDrawInvCar, -1); TextDrawSetOutline(TextDrawInvCar, 0); TextDrawSetProportional(TextDrawInvCar, 1); TextDrawSetShadow(TextDrawInvCar, 1); TextDrawUseBox(TextDrawInvCar, 1); TextDrawBoxColor(TextDrawInvCar, 255); TextDrawTextSize(TextDrawInvCar, 390.000000, 0.000000); TextDrawSetSelectable(TextDrawInvCar, 1); //-- TextDrawInvShop = TextDrawCreate(303.000000, 210.000000, "Shop"); TextDrawBackgroundColor(TextDrawInvShop, 255); TextDrawFont(TextDrawInvShop, 1); TextDrawLetterSize(TextDrawInvShop, 0.200000, 0.799999); TextDrawColor(TextDrawInvShop, -1); TextDrawSetOutline(TextDrawInvShop, 0); TextDrawSetProportional(TextDrawInvShop, 1); TextDrawSetShadow(TextDrawInvShop, 1); TextDrawUseBox(TextDrawInvShop, 1); TextDrawBoxColor(TextDrawInvShop, 255); TextDrawTextSize(TextDrawInvShop, 390.000000, 0.000000); TextDrawSetSelectable(TextDrawInvShop, 1); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock ShowLootsDialog(playerid){ new msg[512]; for(new i=1; i &lt; invnumbers; i ++){ strcat(msg, InvNames[i]); strcat(msg, "\n");} ShowPlayerDialog(playerid,0,DIALOG_STYLE_LIST,"Ñïàâí ëóòà:",msg,"Âûáðàòü","Çàêðûòü"); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock CreateDroppedInv(id, Float:gPosX, Float:gPosY, Float:gPosZ){ if(id == 0) return 1; new f = max_obj+1; for(new a = 0; a &lt; max_obj; a++){ if(dInvData[a][ItemPos][0] == 0.0){ f = a; break;}} if(f > max_obj) return 1; dInvData[f][ItemID] = id; dInvData[f][ItemPos][0] = gPosX; dInvData[f][ItemPos][1] = gPosY; dInvData[f][ItemPos][2] = gPosZ; dInvData[f][ItemObjID] = CreateObject(InvObjects[id], dInvData[f][ItemPos][0]+random(2), dInvData[f][ItemPos][1]+random(2), dInvData[f][ItemPos][2]-0.85/*+0.1*/, 93.7, 120.0, random(360)); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock GetAdminName(playerid){ new adminname[128]; switch(AdminInfo[playerid][aAdmin]){ case 0: adminname = "Èãðîê"; case 1: adminname = "ìëàäøèé ìîäåðàòîð"; case 2: adminname = "ìîäåðàòîð"; case 3: adminname = "àäìèíèñòðàòîð"; case 4: adminname = "ñòàðøèé àäìèíèñòðàòîð"; case 5: adminname = "îñíîâàòåëü";} return adminname;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock AssignPlayerData(playerid){ cache_get_field_content(0, "Password", PlayerInfo[playerid][pPassword], SQL, 129); PlayerInfo[playerid][pID]     = cache_get_field_content_int(0,"ID"); PlayerInfo[playerid][pKills]  = cache_get_field_content_int(0,"Kills"); PlayerInfo[playerid][pDeaths] = cache_get_field_content_int(0,"Deaths"); PlayerInfo[playerid][pMoney]  = cache_get_field_content_int(0,"Money"); PlayerInfo[playerid][pBank]  = cache_get_field_content_int(0,"Bank"); PlayerInfo[playerid][pFaction]= cache_get_field_content_int(0,"Faction"); PlayerInfo[playerid][pRank]   = cache_get_field_content_int(0,"Rank"); PlayerInfo[playerid][pSkin]   = cache_get_field_content_int(0,"Skin"); PlayerInfo[playerid][pPosX]   = cache_get_field_content_float(0, "PosX"); PlayerInfo[playerid][pPosY]   = cache_get_field_content_float(0, "PosY"); PlayerInfo[playerid][pPosZ]   = cache_get_field_content_float(0, "PosZ"); PlayerInfo[playerid][pPosA]   = cache_get_field_content_float(0, "PosA"); PlayerInfo[playerid][pHealth] = cache_get_field_content_float(0, "Health"); PlayerInfo[playerid][pBanned] = cache_get_field_content_int(0,"Banned"); GivePlayerMoney(playerid, PlayerInfo[playerid][pMoney]); SetPlayerHealth(playerid, PlayerInfo[playerid][pHealth]); if(PlayerInfo[playerid][pBanned] > 0){ Message(playerid,"Âàø àêêàóíò çàáëîêèðîâàí!",clRed); Message(playerid,"Äëÿ âûõîäà ïðîïèøèòå /q!",clRed); SetTimerEx("KickPlayer",500,0,"i",playerid);} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock AssignAdminData(playerid){ cache_get_field_content(0, "Password", AdminInfo[playerid][aPassword], SQL, 129); AdminInfo[playerid][aID]     = cache_get_field_content_int(0,"ID"); AdminInfo[playerid][aAdmin]  = cache_get_field_content_int(0,"Admin"); AdminInfo[playerid][aBans]   = cache_get_field_content_int(0,"Bans"); AdminInfo[playerid][aKicks]  = cache_get_field_content_int(0,"Kicks"); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock LoadConfig(){ new File: f = fopen("/Files/cfg.lst",io_readwrite), buff[max_line], idx; while(fread(f,buff)){ idx = 0; Report = strval(strtok(buff,idx)); Kazna = strval(strtok(buff,idx));} fclose(f); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock SaveConfig(){ new File: f = fopen("/Files/cfg.lst",io_write), buff[max_line]; format(buff,max_line,"Report=%d\n",Report); format(buff,max_line,"Kazna=%d\n",Kazna); fwrite(f,buff); fclose(f); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock SetPlayerFaction(playerid,factionid,rangid){                            // Óñòàíàâëèâàåì èä ôðàêöèè new skin; PlayerInfo[playerid][pFaction] = factionid; PlayerInfo[playerid][pRank] = rangid; if(factionid == 0){ SetPlayerSkin(playerid,252);}                                                 // Óñòàíîâèì ñòàíäàðòíûé ñêèí 252 if(factionid == 1){// Ïîëèöèÿ LS switch(rangid){ case 1: SetPlayerSkin(playerid,280);// åñëè ðàíã 1 case 2: SetPlayerSkin(playerid,266);// åñëè ðàíã 2 case 3: SetPlayerSkin(playerid,267);// åñëè ðàíã 3 case 4: SetPlayerSkin(playerid,281);// åñëè ðàíã 4 case 5: SetPlayerSkin(playerid,284);// åñëè ðàíã 5 case 6: SetPlayerSkin(playerid,282);// åñëè ðàíã 6 case 7: SetPlayerSkin(playerid,288);// åñëè ðàíã 7 case 14: SetPlayerSkin(playerid,283);// åñëè ðàíã 8 }} if(factionid == 2){// Ïîëèöèÿ SF switch(rangid){ case 1: SetPlayerSkin(playerid,280);// åñëè ðàíã 1 case 2: SetPlayerSkin(playerid,266);// åñëè ðàíã 2 case 3: SetPlayerSkin(playerid,267);// åñëè ðàíã 3 case 4: SetPlayerSkin(playerid,281);// åñëè ðàíã 4 case 5: SetPlayerSkin(playerid,284);// åñëè ðàíã 5 case 6: SetPlayerSkin(playerid,282);// åñëè ðàíã 6 case 7: SetPlayerSkin(playerid,288);// åñëè ðàíã 7 case 14: SetPlayerSkin(playerid,283);// åñëè ðàíã 8 }} //== if(factionid == 3){// Ïîëèöèÿ LV switch(rangid){ case 1: SetPlayerSkin(playerid,280);// åñëè ðàíã 1 case 2: SetPlayerSkin(playerid,266);// åñëè ðàíã 2 case 3: SetPlayerSkin(playerid,267);// åñëè ðàíã 3 case 4: SetPlayerSkin(playerid,281);// åñëè ðàíã 4 case 5: SetPlayerSkin(playerid,284);// åñëè ðàíã 5 case 6: SetPlayerSkin(playerid,282);// åñëè ðàíã 6 case 7: SetPlayerSkin(playerid,288);// åñëè ðàíã 7 case 14: SetPlayerSkin(playerid,283);// åñëè ðàíã 8 }} //== if(factionid == 4){// FBI switch(rangid){ case 1: SetPlayerSkin(playerid,286);// åñëè ðàíã 1 case 2: SetPlayerSkin(playerid,286);// åñëè ðàíã 2 case 3: SetPlayerSkin(playerid,164);// åñëè ðàíã 3 case 4: SetPlayerSkin(playerid,164);// åñëè ðàíã 4 case 5: SetPlayerSkin(playerid,166);// åñëè ðàíã 5 case 6: SetPlayerSkin(playerid,166);// åñëè ðàíã 6 case 7: SetPlayerSkin(playerid,165);// åñëè ðàíã 7 }} //== if(factionid == 5){// Ïðàâèòåëüñâî øòàòà switch(rangid){ case 1: SetPlayerSkin(playerid,208);// åñëè ðàíã 1 case 2: SetPlayerSkin(playerid,153);// åñëè ðàíã 2 case 3: SetPlayerSkin(playerid,186);// åñëè ðàíã 3 case 4: SetPlayerSkin(playerid,147);// åñëè ðàíã 4 }} //== if(factionid == 6){// Ïîëèöåéñêàÿ àêàäåìèÿ switch(rangid){ case 1: SetPlayerSkin(playerid,280);// åñëè ðàíã 1 case 2: SetPlayerSkin(playerid,280);// åñëè ðàíã 2 case 3: SetPlayerSkin(playerid,280);// åñëè ðàíã 3 case 4: SetPlayerSkin(playerid,280);// åñëè ðàíã 4 }} //== if(factionid == 7){// Àðìèÿ ÑÔ switch(rangid){ case 1..18: SetPlayerSkin(playerid,287);// åñëè ðàíã 1..18 }} //== if(factionid == 8){// Àðìèÿ ËÂ switch(rangid){ case 1..18: SetPlayerSkin(playerid,287);// åñëè ðàíã 1..18 }} skin = GetPlayerSkin(playerid); PlayerInfo[playerid][pSkin] = skin; return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// stock SetPlayerFactionColor(playerid, factionid){                             // Óñòàíàâëèâàåì èä ôðàêöèè if(factionid == 0){ SetPlayerColor(playerid,clWhite);} if(factionid == 1){// Ïîëèöèÿ LS SetPlayerColor(playerid,clBlue);} if(factionid == 2){// Ïîëèöèÿ SF SetPlayerColor(playerid,clBlue);} if(factionid == 3){// Ïîëèöèÿ LV SetPlayerColor(playerid,clBlue);} if(factionid == 4){// FBI SetPlayerColor(playerid,clGrad);} if(factionid == 5){// Ïðàâèòåëüñâî øòàòà SetPlayerColor(playerid,0xDDB201FF);} if(factionid == 6){// Ïîëèöåéñêàÿ àêàäåìèÿ SetPlayerColor(playerid,clBlue);} if(factionid == 7){// Àðìèÿ ÑÔ SetPlayerColor(playerid,clGreen);} if(factionid == 8){// Àðìèÿ ËÂ SetPlayerColor(playerid,clGreen);} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// TeleportPlayer(playerid,Float: x,Float: y,Float: z, Float: za, Int, Virt){    // Òåëåïîðò if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER) { SetVehiclePos(GetPlayerVehicleID(playerid),x,y,z); SetVehicleZAngle(GetPlayerVehicleID(playerid),za); LinkVehicleToInterior(GetPlayerVehicleID(playerid),Int); SetPlayerInterior(playerid,Int); SetVehicleVirtualWorld(GetPlayerVehicleID(playerid),Virt); SetPlayerVirtualWorld(playerid,Virt); SetCameraBehindPlayer(playerid); }else{ SetPlayerPos(playerid,x,y,z); SetPlayerFacingAngle(playerid,za); SetPlayerInterior(playerid,Int); SetPlayerVirtualWorld(playerid,Virt); SetCameraBehindPlayer(playerid);} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// KickBanPlayer(option, adminid, userid, text[]) { new msg[max_line]; switch(option){ case 0:{                                                                      // Kick if(adminid &lt; 0){ format(msg,sizeof(msg),"%s áûë êèêíóò ñåðâåðîì, Ïðè÷èíà: %s.",GetName(userid),text); AMessage(msg,clRed); format(msg,sizeof(msg),"Âû áûëè êèêíóòû ñåðâåðîì, Ïðè÷èíà: %s.",text); Message(userid,msg,clRed); }else{ format(msg,sizeof(msg),"%s áûë êèêíóò àäìèíèñòðàòîðîì %s, Ïðè÷èíà: %s.",GetName(userid),GetName(adminid),text); AMessage(msg,clRed); format(msg,sizeof(msg),"Âû áûëè êèêíóòû àäìèíèñòðàòîðîì %s, Ïðè÷èíà: %s.",GetName(adminid),text); Message(userid,msg,clRed); AdminInfo[adminid][aKicks] += 1;} SetTimerEx("KickPlayer",500,0,"i",userid); } case 1:{                                                                     // Ban if(adminid &lt; 0){ format(msg,sizeof(msg),"%s áûë çàáàíåí ñåðâåðîì, Ïðè÷èíà: %s.",GetName(userid),text); AMessage(msg,clRed); format(msg,sizeof(msg),"Âû áûëè çàáàíåíû ñåðâåðîì, Ïðè÷èíà: %s.",text); Message(userid,msg,clRed); }else{ format(msg,sizeof(msg),"%s áûë çàáàíåí àäìèíèñòðàòîðîì %s, Ïðè÷èíà: %s.",GetName(userid),GetName(adminid),text); AMessage(msg,clRed); format(msg,sizeof(msg),"Âû áûëè çàáàíåíû àäìèíèñòðàòîðîì %s, Ïðè÷èíà: %s.",GetName(adminid),text); Message(userid,msg,clRed); AdminInfo[adminid][aBans] += 1;} SetTimerEx("BanPlayer",500,0,"i",userid);}} return 1;} //============================================================================// //============================ Ïàáëèêè =======================================// //============================================================================// public KickPlayer(playerid){ Kick(playerid); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public BanPlayer(playerid){ Ban(playerid); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public SaveAccount(playerid){ if(!IsPlayerConnected(playerid)) return 1; new query[1024]; GetPlayerHealth(playerid,PlayerInfo[playerid][pHealth]); GetPlayerPos(playerid,PlayerInfo[playerid][pPosX],PlayerInfo[playerid][pPosY],PlayerInfo[playerid][pPosZ]); GetPlayerFacingAngle(playerid, PlayerInfo[playerid][pPosA]); mysql_format(SQL, query, sizeof(query),"UPDATE `Users` SET \ `Kills`    = '%d',  \ `Deaths`   = '%d',  \ `Money`    = '%d',  \ `Bank`     = '%d',  \ `Faction`  = '%d',  \ `Rank`     = '%d',  \ `Skin`     = '%d',  \ `PosX`     = '%f',  \ `PosY`     = '%f',  \ `PosZ`     = '%f',  \ `PosA`     = '%f',  \ `Health`   = '%f.0',\ `Banned`   = '%d'   \ WHERE `ID` = '%d'", PlayerInfo[playerid][pKills], PlayerInfo[playerid][pDeaths], PlayerInfo[playerid][pMoney], PlayerInfo[playerid][pBank], PlayerInfo[playerid][pFaction], PlayerInfo[playerid][pRank], PlayerInfo[playerid][pSkin], PlayerInfo[playerid][pPosX], PlayerInfo[playerid][pPosY], PlayerInfo[playerid][pPosZ], PlayerInfo[playerid][pPosA], PlayerInfo[playerid][pHealth], PlayerInfo[playerid][pBanned], PlayerInfo[playerid][pID]); mysql_tquery(SQL, query, "", ""); mysql_format(SQL, query, sizeof(query),"UPDATE `Admins` SET \ `Admin`    = '%d', \ `Bans`     = '%d', \ `Kicks`    = '%d'  \ WHERE `ID` = '%d'", AdminInfo[playerid][aAdmin], AdminInfo[playerid][aBans], AdminInfo[playerid][aKicks], AdminInfo[playerid][aID]); mysql_tquery(SQL, query, "", ""); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnAdminRegister(playerid){ new msg[max_line]; AdminInfo[playerid][aID] = cache_insert_id(); AdminInfo[playerid][aAdmin] = 1; format(msg,max_line,"&lt;ALogin> âîøåë %s[%d]",GetName(playerid),playerid); AMessage(msg,clYellow); format(msg,max_line,"Âû àâòîðèçèðîâàëèñü êàê %s %i óðîâíÿ.",GetAdminName(playerid),AdminInfo[playerid][aAdmin]); AMessage(msg,clYellow); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnAdminDataLoaded(playerid){ new string[128]; if(cache_num_rows() > 0){ AssignAdminData(playerid); format(string, sizeof(string),"Àêêàóíò %s çàðåãèñòðèðîâàí\n\nÊàê àäìèíèñòðàòîð", GetName(playerid)); ShowPlayerDialog(playerid, dialog_alogin, DIALOG_STYLE_PASSWORD, "Àäìèí àâòîðèçàöèÿ:", string, "Îê", "Îòìåíà");} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnPlayerDataLoaded(playerid, race_check){ if(race_check != MysqlRaceCheck[playerid]) return Kick(playerid); new string[128]; if(cache_num_rows() > 0){ AssignPlayerData(playerid); format(string, sizeof(string),"Àêêàóíò %s çàðåãèñòðèðîâàí.\n Ââåäèòå ïàðîëü:", GetName(playerid)); ShowPlayerDialog(playerid, dialog_login, DIALOG_STYLE_PASSWORD, "Àâòîðèçàöèÿ", string, "Îê", "Îòìåíà"); }else{ format(string, sizeof(string), "Àêêàóíò %s, íå çàðåãèñòðèðîâàí,\n ââåäèòå âàø áóäóùèé ïàðîëü:", GetName(playerid)); ShowPlayerDialog(playerid, dialog_register, DIALOG_STYLE_PASSWORD, "Ðåãèñòðàöèÿ", string, "Îê", "Îòìåíà");} return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnPlayerRegister(playerid){ PlayerInfo[playerid][pID] = cache_insert_id(); Message(playerid,"Âû óñïåøíî çàðåãåñòðèðîâàëèñü.",clGreen); SpawnPlayer(playerid); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public Unfreze(playerid){ TogglePlayerControllable(playerid,1); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public PlayerToPoint(Float:radi, playerid, Float:x, Float:y, Float:z){ if(IsPlayerConnected(playerid)){ new Float:oldposx, Float:oldposy, Float:oldposz; new Float:tempposx, Float:tempposy, Float:tempposz; GetPlayerPos(playerid, oldposx, oldposy, oldposz); tempposx = (oldposx -x); tempposy = (oldposy -y); tempposz = (oldposz -z); if (((tempposx &lt; radi) &amp;&amp; (tempposx > -radi)) &amp;&amp; ((tempposy &lt; radi) &amp;&amp; (tempposy > -radi)) &amp;&amp; ((tempposz &lt; radi) &amp;&amp; (tempposz > -radi))){ return 1;}} return 0;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public HideCash(){ for(new i = 0; i &lt; max_players; i++) TextDrawHideForPlayer(i,TextDrawCash[i]); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnTeleportCreate(f){ TeleportInfo[f][tpID] = cache_insert_id(SQL); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnHouseCreate(f){ HouseInfo[f][hID] = cache_insert_id(SQL); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnBiznesCreate(f){ HouseInfo[f][hID] = cache_insert_id(SQL); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// public OnVehicleCreate(f){ VehicleInfo[f][vID] = cache_insert_id(SQL); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// SpectateStart(playerid, specid) {                                             // Íà÷àòü Spectate TogglePlayerSpectating(playerid,1); SpectateType[playerid] = 1; AdminSpecID[playerid] = specid; if(IsPlayerInAnyVehicle(specid)) PlayerSpectateVehicle(playerid,GetPlayerVehicleID(specid)); else PlayerSpectatePlayer(playerid,specid); return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// SpectateStop(playerid) {                                                      // Çàêîí÷èòü Spectate TogglePlayerSpectating(playerid,0); SpectateType[playerid] = 0; AdminSpecID[playerid] = playerid; return 1;} //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-// //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-//
